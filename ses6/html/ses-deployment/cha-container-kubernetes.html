<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform 4 Kubernetes Cluster | Deployment Guide | SUSE Enterprise Storage 6</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform…"/>
<meta name="description" content="Running containerized Ceph cluster on SUSE CaaS Platform is a technology preview. Do not deploy on a production Kubernetes cluster. This is not a supported ver…"/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="6"/>
<meta name="book-title" content="Deployment Guide"/>
<meta name="chapter-title" content="Chapter 13. SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform 4 Kubernetes Cluster"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new/choose"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="asettle"/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform…"/>
<meta property="og:description" content="Running containerized Ceph cluster on SUSE CaaS Platform is a technology preview. Do not deploy on a production Kubernetes cluster. This is not a supported ver…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform…"/>
<meta name="twitter:description" content="Running containerized Ceph cluster on SUSE CaaS Platform is a technology preview. Do not deploy on a production Kubernetes cluster. This is not a supported ver…"/>
<link rel="prev" href="containerized-ses-on-caasp.html" title="Part IV. Cluster Deployment on Top of SUSE CaaS Platform 4 (Technology Preview)"/><link rel="next" href="bk02apa.html" title="Appendix A. Ceph Maintenance Updates Based on Upstream 'Nautilus' Point Releases"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deployment Guide</a><span> / </span><a class="crumb" href="containerized-ses-on-caasp.html">Cluster Deployment on Top of SUSE CaaS Platform 4 (Technology Preview)</a><span> / </span><a class="crumb" href="cha-container-kubernetes.html">SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform 4 Kubernetes Cluster</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Deployment Guide</div><ol><li><a href="bk02pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-ses.html" class="has-children "><span class="title-number">I </span><span class="title-name">SUSE Enterprise Storage</span></a><ol><li><a href="cha-storage-about.html" class=" "><span class="title-number">1 </span><span class="title-name">SUSE Enterprise Storage 6 and Ceph</span></a></li><li><a href="storage-bp-hwreq.html" class=" "><span class="title-number">2 </span><span class="title-name">Hardware Requirements and Recommendations</span></a></li><li><a href="cha-admin-ha.html" class=" "><span class="title-number">3 </span><span class="title-name">Admin Node HA Setup</span></a></li><li><a href="bk02pt01ch04.html" class=" "><span class="title-number">4 </span><span class="title-name">User Privileges and Command Prompts</span></a></li></ol></li><li><a href="ses-deployment.html" class="has-children "><span class="title-number">II </span><span class="title-name">Cluster Deployment and Upgrade</span></a><ol><li><a href="ceph-install-saltstack.html" class=" "><span class="title-number">5 </span><span class="title-name">Deploying with DeepSea/Salt</span></a></li><li><a href="cha-ceph-upgrade.html" class=" "><span class="title-number">6 </span><span class="title-name">Upgrading from Previous Releases</span></a></li><li><a href="ceph-deploy-ds-custom.html" class=" "><span class="title-number">7 </span><span class="title-name">Customizing the Default Configuration</span></a></li></ol></li><li><a href="additional-software.html" class="has-children "><span class="title-number">III </span><span class="title-name">Installation of Additional Services</span></a><ol><li><a href="cha-ceph-as-intro.html" class=" "><span class="title-number">8 </span><span class="title-name">Installation of Services to Access your Data</span></a></li><li><a href="cha-ceph-additional-software-installation.html" class=" "><span class="title-number">9 </span><span class="title-name">Ceph Object Gateway</span></a></li><li><a href="cha-ceph-as-iscsi.html" class=" "><span class="title-number">10 </span><span class="title-name">Installation of iSCSI Gateway</span></a></li><li><a href="cha-ceph-as-cephfs.html" class=" "><span class="title-number">11 </span><span class="title-name">Installation of CephFS</span></a></li><li><a href="cha-as-ganesha.html" class=" "><span class="title-number">12 </span><span class="title-name">Installation of NFS Ganesha</span></a></li></ol></li><li class="active"><a href="containerized-ses-on-caasp.html" class="has-children you-are-here"><span class="title-number">IV </span><span class="title-name">Cluster Deployment on Top of SUSE CaaS Platform 4 (Technology Preview)</span></a><ol><li><a href="cha-container-kubernetes.html" class=" you-are-here"><span class="title-number">13 </span><span class="title-name">SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform 4 Kubernetes Cluster</span></a></li></ol></li><li><a href="bk02apa.html" class=" "><span class="title-number">A </span><span class="title-name">Ceph Maintenance Updates Based on Upstream 'Nautilus' Point Releases</span></a></li><li><a href="bk02go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="ap-deploy-docupdate.html" class=" "><span class="title-number">B </span><span class="title-name">Documentation Updates</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-container-kubernetes" data-id-title="SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform 4 Kubernetes Cluster"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">6</span></div><div><h2 class="title"><span class="title-number">13 </span><span class="title-name">SUSE Enterprise Storage 6 on Top of SUSE CaaS Platform 4 Kubernetes Cluster</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#">#</a></h2></div></div></div><div id="id-1.4.6.2.3" data-id-title="Technology Preview" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><h6>Warning: Technology Preview</h6><p>
   Running containerized Ceph cluster on SUSE CaaS Platform is a technology preview. Do
   not deploy on a production Kubernetes cluster. This is not a supported version.
  </p></div><p>
  This chapter describes how to deploy containerized SUSE Enterprise Storage
  6 on top of SUSE CaaS Platform 4 Kubernetes cluster.
 </p><section class="sect1" id="kube-consider" data-id-title="Considerations"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.1 </span><span class="title-name">Considerations</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-consider">#</a></h2></div></div></div><p>
   Before you start deploying, consider the following points:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     To run Ceph in Kubernetes, SUSE Enterprise Storage 6 uses an upstream
     project called Rook (<a class="link" href="https://rook.io/" target="_blank">https://rook.io/</a>).
    </p></li><li class="listitem"><p>
     Depending on the configuration, Rook may consume
     <span class="emphasis"><em>all</em></span> unused disks on all nodes in a Kubernetes cluster.
    </p></li><li class="listitem"><p>
     The setup requires privileged containers.
    </p></li></ul></div></section><section class="sect1" id="kube-prereq" data-id-title="Prerequisites"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.2 </span><span class="title-name">Prerequisites</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-prereq">#</a></h2></div></div></div><p>
   The minimum requirements and prerequisites to deploy SUSE Enterprise Storage
   6 on top of SUSE CaaS Platform 4 Kubernetes cluster are as follows:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     A running SUSE CaaS Platform 4 cluster. You need to have an account with a SUSE CaaS Platform
     subscription. You can activate a 60-day free evaluation here
     <a class="link" href="https://www.suse.com/products/caas-platform/download/MkpwEt3Ub98~/?campaign_name=Eval:_CaaSP_4" target="_blank">https://www.suse.com/products/caas-platform/download/MkpwEt3Ub98~/?campaign_name=Eval:_CaaSP_4</a>.
    </p></li><li class="listitem"><p>
     At least three SUSE CaaS Platform worker nodes, with at least one additional disk
     attached to each worker node as storage for the OSD. We recommend four
     SUSE CaaS Platform worker nodes.
    </p></li><li class="listitem"><p>
     At least one OSD per worker node, with a minimum disk size of 5 GB.
    </p></li><li class="listitem"><p>
     Access to SUSE Enterprise Storage 6. You can get a trial subscription
     from here
     <a class="link" href="https://www.suse.com/products/suse-enterprise-storage/download/" target="_blank">https://www.suse.com/products/suse-enterprise-storage/download/</a>.
    </p></li><li class="listitem"><p>
     Access to a workstation that has access to the SUSE CaaS Platform cluster via
     <code class="literal">kubectl</code>. We recommend using the SUSE CaaS Platform master node as
     the workstation.
    </p></li><li class="listitem"><p>
     Ensure that the <code class="literal">SUSE-Enterprise-Storage-6-Pool</code> and
     <code class="literal">SUSE-Enterprise-Storage-6-Updates</code> repositories are
     configured on the management node to install the
     <span class="package">rook-k8s-yaml</span> RPM package.
    </p></li></ul></div></section><section class="sect1" id="kube-rook-manifests" data-id-title="Get Rook Manifests"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.3 </span><span class="title-name">Get Rook Manifests</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-rook-manifests">#</a></h2></div></div></div><p>
   The Rook orchestrator uses configuration files in YAML format called
   <span class="emphasis"><em>manifests</em></span>. The manifests you need are included in the
   <span class="package">rook-k8s-yaml</span> RPM package. You can find this package in
   the SUSE Enterprise Storage 6 repository. Install it by running the
   following:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>zypper install rook-k8s-yaml</pre></div></section><section class="sect1" id="kube-install" data-id-title="Installation"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.4 </span><span class="title-name">Installation</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-install">#</a></h2></div></div></div><p>
   Rook-Ceph includes two main components: the 'operator' which is run by
   Kubernetes and allows creation of Ceph clusters, and the Ceph 'cluster'
   itself which is created and partially managed by the operator.
  </p><section class="sect2" id="kube-configure" data-id-title="Configuration"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.4.1 </span><span class="title-name">Configuration</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-configure">#</a></h3></div></div></div><section class="sect3" id="kube-configure-global" data-id-title="Global Configuration"><div class="titlepage"><div><div><h4 class="title"><span class="title-number">13.4.1.1 </span><span class="title-name">Global Configuration</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-configure-global">#</a></h4></div></div></div><p>
     The manifests used in this setup install all Rook and Ceph components
     in the 'rook-ceph' namespace. If you need to change it, adopt all
     references to the namespace in the Kubernetes manifests accordingly.
    </p><p>
     Depending on which features of Rook you intend to use, alter the 'Pod
     Security Policy' configuration in <code class="filename">common.yaml</code> to
     limit Rook's security requirements. Follow the comments in the manifest
     file.
    </p></section><section class="sect3" id="kube-config-operator" data-id-title="Operator Configuration"><div class="titlepage"><div><div><h4 class="title"><span class="title-number">13.4.1.2 </span><span class="title-name">Operator Configuration</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-config-operator">#</a></h4></div></div></div><p>
     The manifest <code class="filename">operator.yaml</code> configures the Rook
     operator. Normally, you do not need to change it. Find more information
     following the comments in the manifest file.
    </p></section><section class="sect3" id="kube-config-ceph" data-id-title="Ceph Cluster Configuration"><div class="titlepage"><div><div><h4 class="title"><span class="title-number">13.4.1.3 </span><span class="title-name">Ceph Cluster Configuration</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-config-ceph">#</a></h4></div></div></div><p>
     The manifest <code class="filename">cluster.yaml</code> is responsible for
     configuring the actual Ceph cluster which will run in Kubernetes. Find
     detailed description of all available options in the upstream Rook
     documentation at
     <a class="link" href="https://rook.io/docs/rook/v1.0/ceph-cluster-crd.html" target="_blank">https://rook.io/docs/rook/v1.0/ceph-cluster-crd.html</a>.
    </p><p>
     By default, Rook is configured to use all nodes that are not tainted
     with <code class="option">node-role.kubernetes.io/master:NoSchedule</code> and will
     obey configured placement settings (see
     <a class="link" href="https://rook.io/docs/rook/v1.0/ceph-cluster-crd.html#placement-configuration-settings" target="_blank">https://rook.io/docs/rook/v1.0/ceph-cluster-crd.html#placement-configuration-settings</a>).
     The following example disables such behavior and only uses the nodes
     explicitly listed in the nodes section:
    </p><div class="verbatim-wrap"><pre class="screen">storage:
  useAllNodes: false
  nodes:
    - name: caasp4-worker-0
    - name: caasp4-worker-1
    - name: caasp4-worker-2</pre></div><div id="id-1.4.6.2.8.3.4.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note</h6><p>
      By default, Rook is configured to use all free and empty disks on each
      node for use as Ceph storage.
     </p></div></section><section class="sect3" id="kube-config-docs" data-id-title="Documentation"><div class="titlepage"><div><div><h4 class="title"><span class="title-number">13.4.1.4 </span><span class="title-name">Documentation</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-config-docs">#</a></h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
       The Rook-Ceph upstream documentation at
       <a class="link" href="https://rook.github.io/docs/rook/v1.3/ceph-storage.html" target="_blank">https://rook.github.io/docs/rook/v1.3/ceph-storage.html</a>
       contains more detailed information about configuring more advanced
       deployments. Use it as a reference for understanding the basics of
       Rook-Ceph before doing more advanced configurations.
      </p></li><li class="listitem"><p>
       Find more details about the SUSE CaaS Platform product at
       <a class="link" href="https://documentation.suse.com/suse-caasp/4.0/" target="_blank">https://documentation.suse.com/suse-caasp/4.0/</a>.
      </p></li></ul></div></section></section><section class="sect2" id="kube-config-rook-operator" data-id-title="Create the Rook Operator"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.4.2 </span><span class="title-name">Create the Rook Operator</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-config-rook-operator">#</a></h3></div></div></div><p>
    Install the Rook-Ceph common components, CSI roles, and the Rook-Ceph
    operator by executing the following command on the SUSE CaaS Platform master node:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>kubectl apply -f common.yaml -f operator.yaml</pre></div><p>
    <code class="filename">common.yaml</code> will create the 'rook-ceph' namespace,
    Ceph Custom Resource Definitions (CRDs) (see
    <a class="link" href="https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/" target="_blank">https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/</a>)
    to make Kubernetes aware of Ceph Objects (for example, 'CephCluster'), and
    the RBAC roles and Pod Security Policies (see
    <a class="link" href="https://kubernetes.io/docs/concepts/policy/pod-security-policy/" target="_blank">https://kubernetes.io/docs/concepts/policy/pod-security-policy/</a>)
    which are necessary for allowing Rook to manage the cluster-specific
    resources.
   </p><div id="id-1.4.6.2.8.4.5" data-id-title="hostNetwork and hostPorts Usage" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: <code class="option">hostNetwork</code> and <code class="option">hostPorts</code> Usage</h6><p>
     Allowing the usage of <code class="option">hostNetwork</code> is required when using
     <code class="option">hostNetwork: true</code> in the Cluster Resource Definition.
     Allowing the usage of <code class="option">hostPorts</code> in the
     <code class="literal">PodSecurityPolicy</code> is also required.
    </p></div><p>
    Verify the installation by running <code class="command">kubectl get pods -n
    rook-ceph</code> on SUSE CaaS Platform master node, for example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>kubectl get pods -n rook-ceph
NAME                                     READY   STATUS      RESTARTS   AGE
rook-ceph-agent-57c9j                    1/1     Running     0          22h
rook-ceph-agent-b9j4x                    1/1     Running     0          22h
rook-ceph-operator-cf6fb96-lhbj7         1/1     Running     0          22h
rook-discover-mb8gv                      1/1     Running     0          22h
rook-discover-tztz4                      1/1     Running     0          22h</pre></div></section><section class="sect2" id="kube-create-ceph-cluster" data-id-title="Create the Ceph Cluster"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.4.3 </span><span class="title-name">Create the Ceph Cluster</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-create-ceph-cluster">#</a></h3></div></div></div><p>
    After you modify <code class="filename">cluster.yaml</code> according to your needs,
    you can create the Ceph cluster. Run the following command on the SUSE CaaS Platform
    master node:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>kubectl apply -f cluster.yaml</pre></div><p>
    Watch the 'rook-ceph' namespace to see the Ceph cluster being created.
    You will see as many Ceph Monitors as configured in the
    <code class="filename">cluster.yaml</code> manifest (default is 3), one Ceph Manager, and
    as many Ceph OSDs as you have free disks.
   </p><div id="id-1.4.6.2.8.5.5" data-id-title="Temporary OSD Pods" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: Temporary OSD Pods</h6><p>
     While bootstrapping the Ceph cluster, you will see some pods with the
     name
     <code class="literal">rook-ceph-osd-prepare-<em class="replaceable">NODE-NAME</em></code>
     run for a while and then terminate with the status 'Completed'. As their
     name implies, these pods provision Ceph OSDs. They are left without being
     deleted so that you can inspect their logs after their termination. For
     example:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>kubectl get pods --namespace rook-ceph
NAME                                         READY  STATUS     RESTARTS  AGE
rook-ceph-agent-57c9j                        1/1    Running    0         22h
rook-ceph-agent-b9j4x                        1/1    Running    0         22h
rook-ceph-mgr-a-6d48564b84-k7dft             1/1    Running    0         22h
rook-ceph-mon-a-cc44b479-5qvdb               1/1    Running    0         22h
rook-ceph-mon-b-6c6565ff48-gm9wz             1/1    Running    0         22h
rook-ceph-operator-cf6fb96-lhbj7             1/1    Running    0         22h
rook-ceph-osd-0-57bf997cbd-4wspg             1/1    Running    0         22h
rook-ceph-osd-1-54cf468bf8-z8jhp             1/1    Running    0         22h
rook-ceph-osd-prepare-caasp4-worker-0-f2tmw  0/2    Completed  0         9m35s
rook-ceph-osd-prepare-caasp4-worker-1-qsfhz  0/2    Completed  0         9m33s
rook-ceph-tools-76c7d559b6-64rkw             1/1    Running    0         22h
rook-discover-mb8gv                          1/1    Running    0         22h
rook-discover-tztz4                          1/1    Running    0         22h</pre></div></div></section></section><section class="sect1" id="kube-using-rook" data-id-title="Using Rook as Storage for Kubernetes Workload"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.5 </span><span class="title-name">Using Rook as Storage for Kubernetes Workload</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-using-rook">#</a></h2></div></div></div><p>
   Rook allows you to use three different types of storage:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.6.2.9.3.1"><span class="term"><span class="bold"><strong>Object Storage</strong></span></span></dt><dd><p>
      Object storage exposes an S3 API to the storage cluster for applications
      to put and get data. Refer to
      <a class="link" href="https://rook.io/docs/rook/v1.0/ceph-object.html" target="_blank">https://rook.io/docs/rook/v1.0/ceph-object.html</a> for
      a detailed description.
     </p></dd><dt id="id-1.4.6.2.9.3.2"><span class="term">Shared File System</span></dt><dd><p>
      A shared file system can be mounted with read/write permission from
      multiple pods. This is useful for applications that are clustered using a
      shared file system. Refer to
      <a class="link" href="https://rook.io/docs/rook/v1.0/ceph-filesystem.html" target="_blank">https://rook.io/docs/rook/v1.0/ceph-filesystem.html</a>
      for a detailed description.
     </p></dd><dt id="id-1.4.6.2.9.3.3"><span class="term">Block Storage</span></dt><dd><p>
      Block storage allows you to mount storage to a single pod. Refer to
      <a class="link" href="https://rook.io/docs/rook/v1.0/ceph-block.html" target="_blank">https://rook.io/docs/rook/v1.0/ceph-block.html</a> for a
      detailed description.
     </p></dd></dl></div></section><section class="sect1" id="kube-uninstall" data-id-title="Uninstalling Rook"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.6 </span><span class="title-name">Uninstalling Rook</span> <a title="Permalink" class="permalink" href="cha-container-kubernetes.html#kube-uninstall">#</a></h2></div></div></div><p>
   To uninstall Rook, follow these steps:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Delete any Kubernetes applications that are consuming Rook storage.
    </p></li><li class="step"><p>
     Delete all object, file, and/or block storage artifacts that you created
     by following <a class="xref" href="cha-container-kubernetes.html#kube-using-rook" title="13.5. Using Rook as Storage for Kubernetes Workload">Section 13.5, “Using Rook as Storage for Kubernetes Workload”</a>.
    </p></li><li class="step"><p>
     Delete the Ceph cluster, operator, and related resources:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>kubectl delete -f cluster.yaml
<code class="prompt user">root # </code>kubectl delete -f operator.yaml
<code class="prompt user">root # </code>kubectl delete -f common.yaml</pre></div></li><li class="step"><p>
     Delete the data on hosts:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>rm -rf /var/lib/rook</pre></div></li><li class="step"><p>
     If necessary, wipe the disks that were used by Rook. Refer to
     <a class="link" href="https://rook.github.io/docs/rook/v1.3/ceph-teardown.html" target="_blank">https://rook.github.io/docs/rook/v1.3/ceph-teardown.html</a>
     for more details.
    </p></li></ol></div></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="containerized-ses-on-caasp.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Part IV </span>Cluster Deployment on Top of SUSE CaaS Platform 4 (Technology Preview)</span></a> </div><div><a class="pagination-link next" href="bk02apa.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Appendix A </span>Ceph Maintenance Updates Based on Upstream 'Nautilus' Point Releases</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-container-kubernetes.html#kube-consider"><span class="title-number">13.1 </span><span class="title-name">Considerations</span></a></span></li><li><span class="sect1"><a href="cha-container-kubernetes.html#kube-prereq"><span class="title-number">13.2 </span><span class="title-name">Prerequisites</span></a></span></li><li><span class="sect1"><a href="cha-container-kubernetes.html#kube-rook-manifests"><span class="title-number">13.3 </span><span class="title-name">Get Rook Manifests</span></a></span></li><li><span class="sect1"><a href="cha-container-kubernetes.html#kube-install"><span class="title-number">13.4 </span><span class="title-name">Installation</span></a></span></li><li><span class="sect1"><a href="cha-container-kubernetes.html#kube-using-rook"><span class="title-number">13.5 </span><span class="title-name">Using Rook as Storage for Kubernetes Workload</span></a></span></li><li><span class="sect1"><a href="cha-container-kubernetes.html#kube-uninstall"><span class="title-number">13.6 </span><span class="title-name">Uninstalling Rook</span></a></span></li></ul></div><div class="side-title">Give feedback</div><ul class="feedback" id="_give-feedback"><li><a id="_feedback-reportbug" href="#" rel="nofollow" target="_blank">Report an issue</a></li><li><a id="_feedback-editurl" href="https://github.com/SUSE/doc-ses/edit/maintenance/ses6/xml/containerized-kubernetes.xml" rel="nofollow" target="_blank">Edit source document</a></li></ul><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>