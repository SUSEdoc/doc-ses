<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>Manual Configuration | Administration Guide | SUSE Enterprise Storage 6</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Manual Configuration | SES 6"/>
<meta name="description" content="This section introduces advanced information for users that prefer configuring dashboard's settings manually on the command line."/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="6"/>
<meta name="book-title" content="Administration Guide"/>
<meta name="chapter-title" content="Chapter 13. Manual Configuration"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new/choose"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="asettle"/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="Manual Configuration | SES 6"/>
<meta property="og:description" content="This section introduces advanced information for users that prefer configuring dashboard's settings manually on the command line."/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Manual Configuration | SES 6"/>
<meta name="twitter:description" content="This section introduces advanced information for users that prefer configuring dashboard's settings manually on the command line."/>
<link rel="prev" href="dashboard-ogw.html" title="Chapter 12. Managing Object Gateways"/><link rel="next" href="dashboard-user-roles.html" title="Chapter 14. Managing Users and Roles on the Command Line"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration Guide</a><span> / </span><a class="crumb" href="part-dashboard.html">Ceph Dashboard</a><span> / </span><a class="crumb" href="dashboard-initial-configuration.html">Manual Configuration</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration Guide</div><ol><li><a href="bk01pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-cluster-managment.html" class="has-children "><span class="title-number">I </span><span class="title-name">Cluster Management</span></a><ol><li><a href="bk01pt01ch01.html" class=" "><span class="title-number">1 </span><span class="title-name">User Privileges and Command Prompts</span></a></li><li><a href="storage-salt-cluster.html" class=" "><span class="title-number">2 </span><span class="title-name">Salt Cluster Administration</span></a></li><li><a href="cha-deployment-backup.html" class=" "><span class="title-number">3 </span><span class="title-name">Backing Up Cluster Configuration and Data</span></a></li></ol></li><li class="active"><a href="part-dashboard.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Ceph Dashboard</span></a><ol><li><a href="dashboard-about.html" class=" "><span class="title-number">4 </span><span class="title-name">About Ceph Dashboard</span></a></li><li><a href="dashboard-webui-general.html" class=" "><span class="title-number">5 </span><span class="title-name">Dashboard's Web User Interface</span></a></li><li><a href="dashboard-user-mgmt.html" class=" "><span class="title-number">6 </span><span class="title-name">Managing Dashboard Users and Roles</span></a></li><li><a href="dashboard-cluster.html" class=" "><span class="title-number">7 </span><span class="title-name">Viewing Cluster Internals</span></a></li><li><a href="dashboard-pools.html" class=" "><span class="title-number">8 </span><span class="title-name">Managing Pools</span></a></li><li><a href="dashboard-rbds.html" class=" "><span class="title-number">9 </span><span class="title-name">Managing RADOS Block Devices</span></a></li><li><a href="dash-webui-nfs.html" class=" "><span class="title-number">10 </span><span class="title-name">Managing NFS Ganesha</span></a></li><li><a href="dashboard-mds.html" class=" "><span class="title-number">11 </span><span class="title-name">Managing Ceph File Systems</span></a></li><li><a href="dashboard-ogw.html" class=" "><span class="title-number">12 </span><span class="title-name">Managing Object Gateways</span></a></li><li><a href="dashboard-initial-configuration.html" class=" you-are-here"><span class="title-number">13 </span><span class="title-name">Manual Configuration</span></a></li><li><a href="dashboard-user-roles.html" class=" "><span class="title-number">14 </span><span class="title-name">Managing Users and Roles on the Command Line</span></a></li></ol></li><li><a href="part-operate.html" class="has-children "><span class="title-number">III </span><span class="title-name">Operating a Cluster</span></a><ol><li><a href="cha-ceph-operating.html" class=" "><span class="title-number">15 </span><span class="title-name">Introduction</span></a></li><li><a href="ceph-operating-services.html" class=" "><span class="title-number">16 </span><span class="title-name">Operating Ceph Services</span></a></li><li><a href="ceph-monitor.html" class=" "><span class="title-number">17 </span><span class="title-name">Determining Cluster State</span></a></li><li><a href="monitoring-alerting.html" class=" "><span class="title-number">18 </span><span class="title-name">Monitoring and Alerting</span></a></li><li><a href="cha-storage-cephx.html" class=" "><span class="title-number">19 </span><span class="title-name">Authentication with <code class="systemitem">cephx</code></span></a></li><li><a href="cha-storage-datamgm.html" class=" "><span class="title-number">20 </span><span class="title-name">Stored Data Management</span></a></li><li><a href="cha-mgr-modules.html" class=" "><span class="title-number">21 </span><span class="title-name">Ceph Manager Modules</span></a></li><li><a href="ceph-pools.html" class=" "><span class="title-number">22 </span><span class="title-name">Managing Storage Pools</span></a></li><li><a href="ceph-rbd.html" class=" "><span class="title-number">23 </span><span class="title-name">RADOS Block Device</span></a></li><li><a href="cha-ceph-erasure.html" class=" "><span class="title-number">24 </span><span class="title-name">Erasure Coded Pools</span></a></li><li><a href="cha-ceph-configuration.html" class=" "><span class="title-number">25 </span><span class="title-name">Ceph Cluster Configuration</span></a></li></ol></li><li><a href="part-dataccess.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Accessing Cluster Data</span></a><ol><li><a href="cha-ceph-gw.html" class=" "><span class="title-number">26 </span><span class="title-name">Ceph Object Gateway</span></a></li><li><a href="cha-ceph-iscsi.html" class=" "><span class="title-number">27 </span><span class="title-name">Ceph iSCSI Gateway</span></a></li><li><a href="cha-ceph-cephfs.html" class=" "><span class="title-number">28 </span><span class="title-name">Clustered File System</span></a></li><li><a href="cha-ses-cifs.html" class=" "><span class="title-number">29 </span><span class="title-name">Exporting Ceph Data via Samba</span></a></li><li><a href="cha-ceph-nfsganesha.html" class=" "><span class="title-number">30 </span><span class="title-name">NFS Ganesha: Export Ceph Data via NFS</span></a></li></ol></li><li><a href="part-virt.html" class="has-children "><span class="title-number">V </span><span class="title-name">Integration with Virtualization Tools</span></a><ol><li><a href="cha-ceph-libvirt.html" class=" "><span class="title-number">31 </span><span class="title-name">Using <code class="systemitem">libvirt</code> with Ceph</span></a></li><li><a href="cha-ceph-kvm.html" class=" "><span class="title-number">32 </span><span class="title-name">Ceph as a Back-end for QEMU KVM Instance</span></a></li></ol></li><li><a href="part-troubleshooting.html" class="has-children "><span class="title-number">VI </span><span class="title-name">FAQs, Tips and Troubleshooting</span></a><ol><li><a href="storage-tips.html" class=" "><span class="title-number">33 </span><span class="title-name">Hints and Tips</span></a></li><li><a href="storage-faqs.html" class=" "><span class="title-number">34 </span><span class="title-name">Frequently Asked Questions</span></a></li><li><a href="storage-troubleshooting.html" class=" "><span class="title-number">35 </span><span class="title-name">Troubleshooting</span></a></li></ol></li><li><a href="app-stage1-custom.html" class=" "><span class="title-number">A </span><span class="title-name">DeepSea Stage 1 Custom Example</span></a></li><li><a href="bk01apb.html" class=" "><span class="title-number">B </span><span class="title-name">Ceph Maintenance Updates Based on Upstream 'Nautilus' Point Releases</span></a></li><li><a href="bk01go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li><li><a href="ap-adm-docupdate.html" class=" "><span class="title-number">C </span><span class="title-name">Documentation Updates</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="dashboard-initial-configuration" data-id-title="Manual Configuration"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">6</span></div><div><h2 class="title"><span class="title-number">13 </span><span class="title-name">Manual Configuration</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#">#</a></h2></div></div></div><p>
  This section introduces advanced information for users that prefer
  configuring dashboard's settings manually on the command line.
 </p><section class="sect1" id="dashboard-ssl" data-id-title="TLS/SSL Support"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.1 </span><span class="title-name">TLS/SSL Support</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#dashboard-ssl">#</a></h2></div></div></div><p>
   All HTTP connections to the dashboard are secured with SSL/TLS by default. A
   secure connection requires an SSL certificate. You can either use a
   self-signed certificate, or generate a certificate and have a well known
   certificate authority (CA) sign it.
  </p><div id="id-1.3.4.11.4.3" data-id-title="Disabling SSL" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: Disabling SSL</h6><p>
    You may want to disable the SSL support for a specific reason. For example,
    if the dashboard is running behind a proxy that does not support SSL.
   </p><p>
    Use caution when disabling SSL as <span class="bold"><strong>user names and
    passwords</strong></span> will be sent to the dashboard
    <span class="bold"><strong>unencrypted</strong></span>.
   </p><p>
    To disable SSL, run:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph config set mgr mgr/dashboard/ssl false</pre></div></div><div id="id-1.3.4.11.4.4" data-id-title="Restart Ceph Manager Processes" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: Restart Ceph Manager Processes</h6><p>
    You need to restart the Ceph Manager processes manually after changing the SSL
    certificate and key. You can do so by either running
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph mgr fail<em class="replaceable">ACTIVE-MANAGER-NAME</em></pre></div><p>
    or by disabling and re-enabling the dashboard module, which also triggers
    the manager to respawn itself:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph mgr module disable dashboard
<code class="prompt user">cephadm@adm &gt; </code>ceph mgr module enable dashboard</pre></div></div><section class="sect2" id="self-sign-certificates" data-id-title="Self-signed Certificates"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.1.1 </span><span class="title-name">Self-signed Certificates</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#self-sign-certificates">#</a></h3></div></div></div><p>
    Creating a self-signed certificate for secure communication is simple. This
    way you can get the dashboard running quickly.
   </p><div id="id-1.3.4.11.4.5.3" data-id-title="Web Browsers Complain" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note: Web Browsers Complain</h6><p>
     Most Web browsers will complain about a self-signed certificate and
     require explicit confirmation before establishing a secure connection to
     the dashboard.
    </p></div><p>
    To generate and install a self-signed certificate, use the following
    built-in command:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard create-self-signed-cert</pre></div></section><section class="sect2" id="self-sign-certificates-openssl" data-id-title="Self-signed or Trusted Third-party Certificate with OpenSSL"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.1.2 </span><span class="title-name">Self-signed or Trusted Third-party Certificate with OpenSSL</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#self-sign-certificates-openssl">#</a></h3></div></div></div><p>
    OpenSSL is an open-source command-line tool that is commonly used to
    generate private keys, create Certificate Signing Requests (CSR), install
    your SSL/TLS certificate, and identify certificate information. The
    following instructions illustrate how to generate a self-signed or trusted
    third-party certificate using OpenSSL:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Generate a Private Key:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl genrsa -des3 -out server.key 2048</pre></div><p>
      Type the passphrase to protect the key.
     </p></li><li class="step"><p>
      Generate a CSR:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -new -key server.key -out server.csr</pre></div><p>
      Enter the passphrase, and fill in the <code class="literal">Country Name</code>,
      <code class="literal">State or Province Name</code>, <code class="literal">Locality
      Name</code>, <code class="literal">Organization Name</code>,
      <code class="literal">Organizational Unit Name</code>, <code class="literal">Common
      Name</code>, <code class="literal">Email Address</code>.
     </p><div id="id-1.3.4.11.4.6.3.2.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note</h6><p>
       The <code class="literal">Common Name</code> should be the FQDN of the server. For
       example, <code class="literal">server.mydomain.com</code>.
      </p></div><p>
      When asked for a <code class="literal">challenge</code> password and optional
      company name, leave it blank.
     </p></li><li class="step"><p>
      To sign the certificate, select from the following options:
     </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="formalpara-title">Trusted Third-party Certificate Authority. </span>
         Send the CSR to the third party for their signing. The following files
         should be received: Server certificate (public key) and the
         Intermediate CA and the bundles that chain to the Trusted Root CA.
        </p></li><li class="listitem"><p><span class="formalpara-title">Self-signed. </span>
         Sign the certificate with OpenSSL:
        </p><div class="verbatim-wrap"><pre class="screen">openssl x509 -req <span class="strong"><strong>-days 730</strong></span> -in server.csr -signkey server.key -out server.crt</pre></div><p>
        Increase or decrease the value <em class="replaceable">730</em> as
        needed. This is the number of days for which the certificate is valid.
       </p></li></ul></div></li><li class="step"><p><span class="step-optional">(Optional)</span> 
      If needed, create a concatenated PEM file:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -newkey rsa:2048 -new -nodes -x509 -days 3650 -keyout key.pem -out cert.pem</pre></div></li></ol></div></div></section><section class="sect2" id="cert-sign-CA" data-id-title="Certificates Signed by CA"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.1.3 </span><span class="title-name">Certificates Signed by CA</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#cert-sign-CA">#</a></h3></div></div></div><p>
    To properly secure the connection to the dashboard and to eliminate Web
    browser complaints about a self-signed certificate, we recommend using a
    certificate that is signed by a CA.
   </p><p>
    You can generate a certificate key pair with a command similar to the
    following:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root # </code>openssl req -new -nodes -x509 \
  -subj "/O=IT/CN=ceph-mgr-dashboard" -days 3650 \
  -keyout dashboard.key -out dashboard.crt -extensions v3_ca</pre></div><p>
    The above command outputs <code class="filename">dashboard.key</code> and
    <code class="filename">dashboard.crt</code> files. After you get the
    <code class="filename">dashboard.crt</code> file signed by a CA, enable it for all
    Ceph Manager instances by running the following commands:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-ssl-certificate -i dashboard.crt
<code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-ssl-certificate-key -i dashboard.key</pre></div><div id="id-1.3.4.11.4.7.7" data-id-title="Different Certificates for Each Manager Instance" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: Different Certificates for Each Manager Instance</h6><p>
     If you require different certificates for each Ceph Manager instance, modify the
     commands and include the name of the instance as follows. Replace
     <em class="replaceable">NAME</em> with the name of the Ceph Manager instance
     (usually the related host name):
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-ssl-certificate <em class="replaceable">NAME</em> -i dashboard.crt
<code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-ssl-certificate-key <em class="replaceable">NAME</em> -i dashboard.key</pre></div></div></section><section class="sect2" id="cert-sign-custom-CA" data-id-title="Certificates Signed with a Custom CA"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">13.1.4 </span><span class="title-name">Certificates Signed with a Custom CA</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#cert-sign-custom-CA">#</a></h3></div></div></div><p>
    The following procedure needs to be followed once to create the root CA.
   </p><div id="id-1.3.4.11.4.8.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note</h6><p>
     This is the key used to sign the certificate requests. Anyone holding this
     can sign certificates on your behalf.
    </p></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Create the Root Key:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl genrsa -des3 -out rootCA.key 4096</pre></div><div id="id-1.3.4.11.4.8.4.1.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note</h6><p>
       If you want a non-password protected key, remove the
       <code class="option">-des3</code> option.
      </p></div></li><li class="step"><p>
      Create and self-sign the root certificate:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -x509 -new -nodes -key rootCA.key -sha256 -days 1024 -out rootCA.crt</pre></div></li></ol></div></div><p>
    The following procedure needs to be followed for each server that needs a
    trusted certificate from our CA.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Create the certificate key:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl genrsa -out mydomain.com.key 2048</pre></div><p>
      The certificate signing request is where you specify the details for the
      certificate you want to generate. This request is processed by the owner
      of the Root Key to generate the certificate.
     </p></li><li class="step"><p>
      These are two ways to create the CSR:
     </p><div id="id-1.3.4.11.4.8.6.2.2" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><h6>Important</h6><p>
       When creating the certificate signing request, it is important to
       specify the <code class="literal">Common Name</code> providing the IP address or
       domain name for the service, otherwise the certificate cannot be
       verified.
      </p></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
        Interactive method. For example:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -new -key mydomain.com.key -out mydomain.com.csr</pre></div><p>
        You will then be prmopted for information. For example, the
        <code class="literal">Country Name</code>, <code class="literal">Organization Name</code>,
        and <code class="literal">Email Address</code>.
       </p></li><li class="listitem"><p>
        One-liner method. This is where instead of being interactively
        prompted, you include the information up front. For example:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -new -sha256 -key mydomain.com.key -subj "/C=US/ST=CA/O=MyOrg, Inc./CN=mydomain.com" -out mydomain.com.csr</pre></div><p>
        If you need to pass additional configuration in the one-liner method,
        you can use the <code class="option">-config</code> parameter. For example:
       </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -new -sha256 \
      -key mydomain.com.key \
      -subj "/C=US/ST=CA/O=MyOrg, Inc./CN=mydomain.com" \
      -reqexts SAN \
      -config &lt;(cat /etc/ssl/openssl.cnf \
          &lt;(printf "\n[SAN]\nsubjectAltName=DNS:mydomain.com,DNS:www.mydomain.com")) \
      -out mydomain.com.csr</pre></div></li></ul></div></li><li class="step"><p>
      Verify the CSR content:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl req -in mydomain.com.csr -noout -text</pre></div></li><li class="step"><p>
      Generate the certificate using the <code class="literal">mydomain</code> CSR and
      key along with the CA Root Key:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl x509 -req -in mydomain.com.csr -CA rootCA.crt -CAkey rootCA.key -CAcreateserial -out mydomain.com.crt -days 500 -sha256</pre></div></li><li class="step"><p>
      Verify the certificate's content:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>openssl x509 -in mydomain.com.crt -text -noout</pre></div></li></ol></div></div></section></section><section class="sect1" id="dashboard-hostname-port" data-id-title="Host Name and Port Number"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.2 </span><span class="title-name">Host Name and Port Number</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#dashboard-hostname-port">#</a></h2></div></div></div><p>
   The Ceph Dashboard Web application binds to a specific TCP/IP address and TCP
   port. By default, the currently active Ceph Manager that hosts the dashboard binds
   to TCP port 8443 (or 8080 when SSL is disabled).
  </p><p>
   The dashboard Web application binds to "::" by default, which corresponds to
   all available IPv4 and IPv6 addresses. You can change the IP address and
   port number of the Web application so that they apply to all Ceph Manager instances
   by using the following commands:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph config set mgr mgr/dashboard/server_addr <em class="replaceable">IP_ADDRESS</em>
<code class="prompt user">cephadm@adm &gt; </code>ceph config set mgr mgr/dashboard/server_port <em class="replaceable">PORT_NUMBER</em></pre></div><div id="id-1.3.4.11.5.5" data-id-title="Configure Ceph Manager Instances Separately" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: Configure Ceph Manager Instances Separately</h6><p>
    Since each <code class="systemitem">ceph-mgr</code> daemon hosts
    its own instance of the dashboard, you may need to configure them
    separately. Change the IP address and port number for a specific manager
    instance by using the following commands (replace
    <em class="replaceable">NAME</em> with the ID of the
    <code class="systemitem">ceph-mgr</code> instance):
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph config set mgr mgr/dashboard/<em class="replaceable">NAME</em>/server_addr <em class="replaceable">IP_ADDRESS</em>
<code class="prompt user">cephadm@adm &gt; </code>ceph config set mgr mgr/dashboard/<em class="replaceable">NAME</em>/server_port <em class="replaceable">PORT_NUMBER</em></pre></div></div><div id="id-1.3.4.11.5.6" data-id-title="List Configured Endpoints" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><h6>Tip: List Configured Endpoints</h6><p>
    The <code class="command">ceph mgr services</code> command displays all endpoints
    that are currently configured. Look for the 'dashboard' key to obtain the
    URL for accessing the dashboard.
   </p></div></section><section class="sect1" id="dashboard-username-password" data-id-title="User Name and Password"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.3 </span><span class="title-name">User Name and Password</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#dashboard-username-password">#</a></h2></div></div></div><p>
   If you do not want to use the default administrator account, create a
   different user account and associate it with at least one role. We provide a
   set of predefined system roles that you can use. For more details refer to
   <a class="xref" href="dashboard-user-roles.html" title="Chapter 14. Managing Users and Roles on the Command Line">Chapter 14, <em>Managing Users and Roles on the Command Line</em></a>.
  </p><p>
   To create a user with administrator privileges, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard ac-user-create <em class="replaceable">USER_NAME</em> <em class="replaceable">PASSWORD</em> administrator</pre></div></section><section class="sect1" id="dashboard-ogw-enabling" data-id-title="Enabling the Object Gateway Management Front-end"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.4 </span><span class="title-name">Enabling the Object Gateway Management Front-end</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#dashboard-ogw-enabling">#</a></h2></div></div></div><p>
   To use the Object Gateway management functionality of the dashboard, you need to
   provide the login credentials of a user with the 'system' flag enabled:
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     If you do not have a user with the 'system' flag, create one:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>radosgw-admin user create --uid=<em class="replaceable">USER_ID</em> --display-name=<em class="replaceable">DISPLAY_NAME</em> --system</pre></div><p>
     Take note of the 'access_key' and 'secret_key' keys in the output of the
     command.
    </p></li><li class="step"><p>
     You can also obtain the credentials of an existing user by using the
     <code class="command">radosgw-admin</code> command:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>radosgw-admin user info --uid=<em class="replaceable">USER_ID</em></pre></div></li><li class="step"><p>
     Provide the received credentials to the dashboard:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-access-key <em class="replaceable">ACCESS_KEY</em>
<code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-secret-key <em class="replaceable">SECRET_KEY</em></pre></div></li></ol></div></div><p>
   There are several points to consider:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     The host name and port number of the Object Gateway are determined automatically.
    </p></li><li class="listitem"><p>
     If multiple zones are used, it will automatically determine the host
     within the master zonegroup and master zone. This is sufficient for most
     setups, but in some circumstances you may want to set the host name and
     port manually:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-host <em class="replaceable">HOST</em>
<code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-port <em class="replaceable">PORT</em></pre></div></li><li class="listitem"><p>
     These are additional settings that you may need:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-scheme <em class="replaceable">SCHEME</em>  # http or https
<code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-admin-resource <em class="replaceable">ADMIN_RESOURCE</em>
<code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-user-id <em class="replaceable">USER_ID</em></pre></div></li><li class="listitem"><p>
     If you are using a self-signed certificate
     (<a class="xref" href="dashboard-initial-configuration.html#dashboard-ssl" title="13.1. TLS/SSL Support">Section 13.1, “TLS/SSL Support”</a>) in your Object Gateway setup, disable
     certificate verification in the dashboard to avoid refused connections
     caused by certificates signed by an unknown CA or not matching the host
     name:
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rgw-api-ssl-verify False</pre></div></li><li class="listitem"><p>
     If the Object Gateway takes too long to process requests and the dashboard runs
     into timeouts, the timeout value can be adjusted (default is 45 seconds):
    </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard set-rest-requests-timeout <em class="replaceable">SECONDS</em></pre></div></li></ul></div></section><section class="sect1" id="dashboard-sso" data-id-title="Enable Single Sign-On"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">13.5 </span><span class="title-name">Enable Single Sign-On</span> <a title="Permalink" class="permalink" href="dashboard-initial-configuration.html#dashboard-sso">#</a></h2></div></div></div><p>
   <span class="emphasis"><em>Single Sign-On</em></span> (SSO) is an access control method that enables
   users to log in with a single ID and password to multiple applications
   simultaneously.
  </p><p>
   The Ceph Dashboard supports external authentication of users via the SAML 2.0
   protocol. Because <span class="emphasis"><em>authorization</em></span> is still performed by
   the dashboard, you first need to create user accounts and associate them
   with the desired roles. However, the <span class="emphasis"><em>authentication</em></span>
   process can be performed by an existing <span class="emphasis"><em>Identity
   Provider</em></span> (IdP).
  </p><p>
   To configure Single Sign-On, use the following command:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard sso setup saml2 <em class="replaceable">CEPH_DASHBOARD_BASE_URL</em> \
 <em class="replaceable">IDP_METADATA</em> <em class="replaceable">IDP_USERNAME_ATTRIBUTE</em> \
 <em class="replaceable">IDP_ENTITY_ID</em> <em class="replaceable">SP_X_509_CERT</em> \
 <em class="replaceable">SP_PRIVATE_KEY</em></pre></div><p>
   Parameters:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.3.4.11.8.7.1"><span class="term"><em class="replaceable">CEPH_DASHBOARD_BASE_URL</em></span></dt><dd><p>
      Base URL where Ceph Dashboard is accessible (for example,
      'https://cephdashboard.local').
     </p></dd><dt id="id-1.3.4.11.8.7.2"><span class="term"><em class="replaceable">IDP_METADATA</em></span></dt><dd><p>
      URL, file path, or content of the IdP metadata XML (for example,
      'https://myidp/metadata').
     </p></dd><dt id="id-1.3.4.11.8.7.3"><span class="term"><em class="replaceable">IDP_USERNAME_ATTRIBUTE</em></span></dt><dd><p>
      Optional. Attribute that will be used to get the user name from the
      authentication response. Defaults to 'uid'.
     </p></dd><dt id="id-1.3.4.11.8.7.4"><span class="term"><em class="replaceable">IDP_ENTITY_ID</em></span></dt><dd><p>
      Optional. Use when more than one entity ID exists on the IdP metadata.
     </p></dd><dt id="id-1.3.4.11.8.7.5"><span class="term"><em class="replaceable">SP_X_509_CERT</em> / <em class="replaceable">SP_PRIVATE_KEY</em></span></dt><dd><p>
      Optional. File path or content of the certificate that will be used by
      Ceph Dashboard (Service Provider) for signing and encryption.
     </p></dd></dl></div><div id="id-1.3.4.11.8.8" data-id-title="SAML Requests" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note: SAML Requests</h6><p>
    The issuer value of SAML requests will follow this pattern:
   </p><div class="verbatim-wrap"><pre class="screen"><em class="replaceable">CEPH_DASHBOARD_BASE_URL</em>/auth/saml2/metadata</pre></div></div><p>
   To display the current SAML 2.0 configuration, run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard sso show saml2</pre></div><p>
   To disable Single Sign-On, run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard sso disable</pre></div><p>
   To check if SSO is enabled, run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard sso status</pre></div><p>
   To enable SSO, run:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephadm@adm &gt; </code>ceph dashboard sso enable saml2</pre></div></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="dashboard-ogw.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 12 </span>Managing Object Gateways</span></a> </div><div><a class="pagination-link next" href="dashboard-user-roles.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 14 </span>Managing Users and Roles on the Command Line</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="dashboard-initial-configuration.html#dashboard-ssl"><span class="title-number">13.1 </span><span class="title-name">TLS/SSL Support</span></a></span></li><li><span class="sect1"><a href="dashboard-initial-configuration.html#dashboard-hostname-port"><span class="title-number">13.2 </span><span class="title-name">Host Name and Port Number</span></a></span></li><li><span class="sect1"><a href="dashboard-initial-configuration.html#dashboard-username-password"><span class="title-number">13.3 </span><span class="title-name">User Name and Password</span></a></span></li><li><span class="sect1"><a href="dashboard-initial-configuration.html#dashboard-ogw-enabling"><span class="title-number">13.4 </span><span class="title-name">Enabling the Object Gateway Management Front-end</span></a></span></li><li><span class="sect1"><a href="dashboard-initial-configuration.html#dashboard-sso"><span class="title-number">13.5 </span><span class="title-name">Enable Single Sign-On</span></a></span></li></ul></div><div class="side-title">Give feedback</div><ul class="feedback" id="_give-feedback"><li><a id="_feedback-reportbug" href="#" rel="nofollow" target="_blank">Report an issue</a></li><li><a id="_feedback-editurl" href="https://github.com/SUSE/doc-ses/edit/maintenance/ses6/xml/dashboard_manual_config.xml" rel="nofollow" target="_blank">Edit source document</a></li></ul><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>