<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SES 7 | Deploying and Administering SUSE Enterprise Storage with Rook | Configuration</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Configuration | SES 7"/>
<meta name="description" content="For almost any Ceph cluster, the user will want—and may need— to change some Ceph configurations. These changes often may be warranted in order to al…"/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="7"/>
<meta name="book-title" content="Deploying and Administering SUSE Enterprise Storage with Rook"/>
<meta name="chapter-title" content="Chapter 7. Configuration"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="tbazant"/>
<meta name="tracker-gh-template" content="&#10;     ### Type of report&#10;   - [ ] bug&#10;   - [ ] feature request&#10;&#10;### Source Document&#10;@@source@@&#10;&#10;### Summary&#10;&lt;!-- A clear and concise description of what the bug/feature request is. --&gt;&#10;&#10;### Steps To Reproduce&#10;&lt;!-- Steps to reproduce the behavior if you ran through steps in the document. --&gt;&#10;&#10;### Expected Results&#10;&lt;!-- A clear and concise description of what you expected to happen. --&gt;&#10;&#10;### Actual Results&#10;&lt;!-- Explain what actually happened if steps were executed, and if applicable, add screenshots to help explain your problem. --&gt;&#10;&#10;### Notes&#10;&lt;!-- Add any other context about the problem here. --&gt;&#10;&#10;    "/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="Configuration | SES 7"/>
<meta property="og:description" content="For almost any Ceph cluster, the user will want—and may need— to change some Ceph configurations. These changes often may be warranted in order to al…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Configuration | SES 7"/>
<meta name="twitter:description" content="For almost any Ceph cluster, the user will want—and may need— to change some Ceph configurations. These changes often may be warranted in order to al…"/>
<link rel="prev" href="admin-caasp-crd.html" title="Chapter 6. Ceph cluster custom resource definitions"/><link rel="next" href="admin-caasp-cephtoolbox.html" title="Chapter 8. Toolboxes"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deploying and Administering SUSE Enterprise Storage with Rook</a><span> / </span><a class="crumb" href="rook-ses-admin.html">Administrating Ceph on SUSE CaaS Platform</a><span> / </span><a class="crumb" href="admin-caasp-cephconfig.html">Configuration</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Deploying and Administering SUSE Enterprise Storage with Rook</div><ol><li><a href="preface-rook.html" class=" "><span class="title-number"> </span><span class="title-name">About this guide</span></a></li><li><a href="rook-ses-deployment.html" class="has-children "><span class="title-number">I </span><span class="title-name">Quick Start: Deploying Ceph on SUSE CaaS Platform</span></a><ol><li><a href="deploy-rook.html" class=" "><span class="title-number">1 </span><span class="title-name">Quick start</span></a></li></ol></li><li class="active"><a href="rook-ses-admin.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Administrating Ceph on SUSE CaaS Platform</span></a><ol><li><a href="admin-intro-caasp.html" class=" "><span class="title-number">2 </span><span class="title-name">Rook-Ceph administration</span></a></li><li><a href="admin-caasp-cluster.html" class=" "><span class="title-number">3 </span><span class="title-name">Ceph cluster administration</span></a></li><li><a href="admin-caasp-block-storage.html" class=" "><span class="title-number">4 </span><span class="title-name">Block Storage</span></a></li><li><a href="admin-caasp-cephfs.html" class=" "><span class="title-number">5 </span><span class="title-name">CephFS</span></a></li><li><a href="admin-caasp-crd.html" class=" "><span class="title-number">6 </span><span class="title-name">Ceph cluster custom resource definitions</span></a></li><li><a href="admin-caasp-cephconfig.html" class=" you-are-here"><span class="title-number">7 </span><span class="title-name">Configuration</span></a></li><li><a href="admin-caasp-cephtoolbox.html" class=" "><span class="title-number">8 </span><span class="title-name">Toolboxes</span></a></li><li><a href="admin-caasp-cephosd.html" class=" "><span class="title-number">9 </span><span class="title-name">Ceph OSD management</span></a></li><li><a href="admin-caasp-ceph-examples.html" class=" "><span class="title-number">10 </span><span class="title-name">Ceph examples</span></a></li><li><a href="admin-caasp-advanced-config.html" class=" "><span class="title-number">11 </span><span class="title-name">Advanced configuration</span></a></li><li><a href="admin-caasp-object-storage.html" class=" "><span class="title-number">12 </span><span class="title-name">Object Storage</span></a></li><li><a href="admin-caasp-dashboard.html" class=" "><span class="title-number">13 </span><span class="title-name">Ceph Dashboard</span></a></li></ol></li><li><a href="rook-ses-troubleshooting.html" class="has-children "><span class="title-number">III </span><span class="title-name">Troubleshooting Ceph on SUSE CaaS Platform</span></a><ol><li><a href="atroubleshooting-caasp-debugging-rook.html" class=" "><span class="title-number">14 </span><span class="title-name">Troubleshooting</span></a></li><li><a href="admin-caasp-ceph-common-issues.html" class=" "><span class="title-number">15 </span><span class="title-name">Common issues</span></a></li></ol></li><li><a href="bk05apa.html" class=" "><span class="title-number">A </span><span class="title-name">Ceph maintenance updates based on upstream 'Octopus' point releases</span></a></li><li><a href="bk05go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="admin-caasp-cephconfig" data-id-title="Configuration"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">7</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">Configuration</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect1" id="configuration" data-id-title="Ceph configuration"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">Ceph configuration</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#configuration">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   For almost any Ceph cluster, the user will want—and may need—
   to change some Ceph configurations. These changes often may be warranted
   in order to alter performance to meet SLAs, or to update default data
   resiliency settings.
  </p><div id="id-1.7.4.7.3.3" class="admonition warning normal"><img class="symbol" alt="Warning" title="Warning" src="static/images/icon-warning.svg"/><div class="admon-title">Warning</div><p>
    Modify Ceph settings carefully, and review the Ceph configuration
    documentation before making any changes. Changing the settings could result
    in unhealthy daemons or even data loss if used incorrectly.
   </p></div><section class="sect2" id="required-configurations" data-id-title="Required configurations"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.1.1 </span><span class="title-name">Required configurations</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#required-configurations">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
    Rook and Ceph both strive to make configuration as easy as possible,
    but there are some configuration options which users are well advised to
    consider for any production cluster.
   </p><section class="sect3" id="default-pg-and-pgp-counts" data-id-title="Default PG and PGP counts"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">7.1.1.1 </span><span class="title-name">Default PG and PGP counts</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#default-pg-and-pgp-counts">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The number of PGs and PGPs can be configured on a per-pool basis, but it
     is highly advised to set default values that are appropriate for your
     Ceph cluster. Appropriate values depend on the number of OSDs the user
     expects to have backing each pool.
    </p><p>
     Pools created prior to v1.1 will have a default PG count of 100. Pools
     created after v1.1 will have Ceph's default PG count.
    </p><p>
     An easier option exists for Rook-Ceph clusters running Ceph Nautilus
     (v14.2.x) or newer. Nautilus introduced the PG auto-scaler mgr module
     capable of automatically managing PG and PGP values for pools.
    </p><p>
     In Nautilus, this module is not enabled by default, but can be enabled by
     the following setting in the CephCluster CR:
    </p><div class="verbatim-wrap"><pre class="screen">  spec:
    mgr:
      modules:
      - name: pg_autoscaler
        enabled: true</pre></div><p>
     In Octopus (v15.2.x), this module is enabled by default without the
     aforementioned setting.
    </p><p>
     With that setting, the autoscaler will be enabled for all new pools. If
     you do not desire to have the autoscaler enabled for all new pools, you
     will need to use the Rook toolbox to enable the module and enable the
     autoscaling on individual pools.
    </p><p>
     The autoscaler is not enabled for the existing pools after enabling the
     module. So if you want to enable the autoscaling for these existing pools,
     they must be configured from the toolbox.
    </p></section></section><section class="sect2" id="specifying-configuration-options" data-id-title="Specifying configuration options"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">7.1.2 </span><span class="title-name">Specifying configuration options</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#specifying-configuration-options">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><section class="sect3" id="toolbox-ceph-cli" data-id-title="Toolbox and the Ceph CLI"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">7.1.2.1 </span><span class="title-name">Toolbox and the Ceph CLI</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#toolbox-ceph-cli">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The most recommended way of configuring Ceph is to set Ceph's
     configuration directly. The first method for doing so is to use Ceph's
     CLI from the Rook-Ceph toolbox pod. From the toolbox, the user can change
     Ceph configurations, enable manager modules, create users and pools, and
     much more.
    </p></section><section class="sect3" id="rook-ceph-dashboard" data-id-title="Ceph Dashboard"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">7.1.2.2 </span><span class="title-name">Ceph Dashboard</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#rook-ceph-dashboard">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     The Ceph Dashboard is another way of setting some of Ceph’s configuration
     directly. Configuration by the Ceph Dashboard is recommended with the same
     priority as configuration via the Ceph CLI (above).
    </p></section><section class="sect3" id="advanced-configuration-via-ceph-conf-override-configmap" data-id-title="Advanced configuration via ceph.conf overrides ConfigMap"><div class="titlepage"><div><div><div class="title-container"><h4 class="title"><span class="title-number-name"><span class="title-number">7.1.2.3 </span><span class="title-name">Advanced configuration via <code class="filename">ceph.conf</code> overrides ConfigMap</span></span> <a title="Permalink" class="permalink" href="admin-caasp-cephconfig.html#advanced-configuration-via-ceph-conf-override-configmap">#</a></h4><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/admin_caasp_cephconfig.xml" title="Edit source document"> </a></div></div></div></div></div><p>
     Setting configuration options via Ceph’s CLI requires that at least
     one MON be available for the configuration options to be set, and setting
     configuration options via dashboard requires at least one mgr to be
     available. Ceph may also have a small number of very advanced settings
     that are not able to be modified easily via CLI or dashboard. The
     <span class="strong"><strong>least</strong></span> recommended method for
     configuring Ceph is intended as a last-resort fallback in situations
     like these.
    </p></section></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="admin-caasp-crd.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 6 </span>Ceph cluster custom resource definitions</span></a> </div><div><a class="pagination-link next" href="admin-caasp-cephtoolbox.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 8 </span>Toolboxes</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="admin-caasp-cephconfig.html#configuration"><span class="title-number">7.1 </span><span class="title-name">Ceph configuration</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>