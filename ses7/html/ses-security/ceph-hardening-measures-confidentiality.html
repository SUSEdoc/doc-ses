<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>SES 7 | Security Hardening Guide | Confidentiality</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Confidentiality | SES 7"/>
<meta name="description" content="Confidentiality is a common requirement. There are diffent ways of ensuring data stays confidential at different times of its lifecycle."/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="7"/>
<meta name="book-title" content="Security Hardening Guide"/>
<meta name="chapter-title" content="Chapter 7. Confidentiality"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="tbazant"/>
<meta name="tracker-gh-template" content="&#10;     ### Type of report&#10;   - [ ] bug&#10;   - [ ] feature request&#10;&#10;### Source Document&#10;@@source@@&#10;&#10;### Summary&#10;&lt;!-- A clear and concise description of what the bug/feature request is. --&gt;&#10;&#10;### Steps To Reproduce&#10;&lt;!-- Steps to reproduce the behavior if you ran through steps in the document. --&gt;&#10;&#10;### Expected Results&#10;&lt;!-- A clear and concise description of what you expected to happen. --&gt;&#10;&#10;### Actual Results&#10;&lt;!-- Explain what actually happened if steps were executed, and if applicable, add screenshots to help explain your problem. --&gt;&#10;&#10;### Notes&#10;&lt;!-- Add any other context about the problem here. --&gt;&#10;&#10;    "/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="Confidentiality | SES 7"/>
<meta property="og:description" content="Confidentiality is a common requirement. There are diffent ways of ensuring data stays confidential at different times of its lifecycle."/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Confidentiality | SES 7"/>
<meta name="twitter:description" content="Confidentiality is a common requirement. There are diffent ways of ensuring data stays confidential at different times of its lifecycle."/>
<link rel="prev" href="ceph-hardening-measures-authentication.html" title="Chapter 6. Authentication"/><link rel="next" href="bk04go01.html" title="Glossary"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script><meta name="edit-url" content="https://github.com/SUSE/doc-ses/edit/main/xml/hardening_measures_confidentiality.xml"/></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Security Hardening Guide</a><span> / </span><a class="crumb" href="ceph-security-hardening-meassures.html">Hardening meassures</a><span> / </span><a class="crumb" href="ceph-hardening-measures-confidentiality.html">Confidentiality</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Security Hardening Guide</div><ol><li><a href="preface-security.html" class=" "><span class="title-number"> </span><span class="title-name">About this guide</span></a></li><li><a href="ceph-security-hardening-initial.html" class="has-children "><span class="title-number">I </span><span class="title-name">Introduction</span></a><ol><li><a href="ceph-hardening1.html" class=" "><span class="title-number">1 </span><span class="title-name">Understanding the threat</span></a></li><li><a href="ceph-hardening2.html" class=" "><span class="title-number">2 </span><span class="title-name">About this guide</span></a></li></ol></li><li class="active"><a href="ceph-security-hardening-meassures.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Hardening meassures</span></a><ol><li><a href="ceph-hardening-measures-general.html" class=" "><span class="title-number">3 </span><span class="title-name">General</span></a></li><li><a href="ceph-hardening-measures-network.html" class=" "><span class="title-number">4 </span><span class="title-name">Network</span></a></li><li><a href="ceph-hardening-measures-dos.html" class=" "><span class="title-number">5 </span><span class="title-name">Prevent Denial Of Service (DoS)</span></a></li><li><a href="ceph-hardening-measures-authentication.html" class=" "><span class="title-number">6 </span><span class="title-name">Authentication</span></a></li><li><a href="ceph-hardening-measures-confidentiality.html" class=" you-are-here"><span class="title-number">7 </span><span class="title-name">Confidentiality</span></a></li></ol></li><li><a href="bk04go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="ceph-hardening-measures-confidentiality" data-id-title="Confidentiality"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">7</span></div><div><div class="title-container"><h1 class="title"><span class="title-number-name"><span class="title-number">7 </span><span class="title-name">Confidentiality</span></span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-confidentiality.html#">#</a></h1><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/hardening_measures_confidentiality.xml" title="Edit source document"> </a></div></div></div></div></div><p>
  Confidentiality is a common requirement. There are diffent ways of ensuring
  data stays confidential at different times of its lifecycle.
 </p><section class="sect1" id="data-at-rest" data-id-title="Data at rest"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.1 </span><span class="title-name">Data at rest</span></span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-confidentiality.html#data-at-rest">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/hardening_measures_confidentiality.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   The data stored in OSDs is not encrypted by default. If you have high
   confidentiality requirements, we recommend that you encrypt the storage that
   you provide SUSE Enterprise Storage for use. This protects the data if a disk is
   stolen or when you decommission disk drives.
  </p><p>
   The easiest way to do this is to enable disk encryption directly when you
   install the system. The SUSE installer allows you to create encrypted
   partitions.
  </p><p>
   Alternatively you can use cryptsetup to encrypt individual partitions:
   <code class="command">cryptsetup LuksFormat --key-size 256 /dev/sda1</code> allows you
   to create an encrypted partition that you can open with <code class="command">cryptsetup
   luksOpen /dev/sda1 osd_data</code>. The resulting
   <code class="literal">osd_data</code> device can then be given to SUSE Enterprise Storage to
   store data that will be transparently encrypted.
  </p><p>
   This only protects data if the disk is offline. To protect data at rest when
   the system is running you can use client-side encryption.
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     For RADOS Block Device, you can encrypt the block device at the client (such as,
     cryptsetup).
    </p></li><li class="listitem"><p>
     For CephFS you can you file level encryption (such as, EncFS).
    </p></li><li class="listitem"><p>
     For RADOS, you need to encrypt the data in the application before
     storing it via the REST interface.
    </p></li></ul></div><p>
   With this the data is encrypted on the client and is never available in
   cleartext on SUSE Enterprise Storage. This also protects in case the transport
   protocol is either not encrypted or an attacker manages to circumvent the
   transport encryption.
  </p></section><section class="sect1" id="data-in-flight" data-id-title="Data in flight"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">7.2 </span><span class="title-name">Data in flight</span></span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-confidentiality.html#data-in-flight">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a><a target="_blank" class="icon-editsource" href="https://github.com/SUSE/doc-ses/edit/main/xml/hardening_measures_confidentiality.xml" title="Edit source document"> </a></div></div></div></div></div><p>
   When creating services on you SUSE Enterprise Storage cluster you should enable
   encryption if possible. For example, RADOS can communicate via HTTP or
   HTTPs. Configure it to use HTTPs and use certificates that can be checked by
   the client.
  </p><p>
   If possible, do not use self signed certificates. Either use certificates
   signed by trusted authorities or create your own PKI to issue trusted
   certificates. Using self signed certificates is better than using plaintext
   protocols, but it can still allow attackers to get between the communicating
   nodes.
  </p><p>
   To secure the communication within the SUSE Enterprise Storage cluster you have
   several options:
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     You can use a dedicated network that is not reachable externally.
     Depending on your security needs and regulatory requirements that can be
     acceptable.
    </p></li><li class="listitem"><p>
     You encrypt the links connecting the SUSE Enterprise Storage machines with an
     external mechanism, for example using IPsec to setup secure tunnels
     between the machines that takes care of encryption.
    </p></li><li class="listitem"><p>
     You use the encryption capabilities in msgr2.
    </p></li></ul></div><p>
   On fresh SUSE Enterprise Storage installs msgr2 is available, which also allows for
   transport encryption for data. Unfortunately, many clients still do not
   support this, but Ceph clients using librbd starting with Nautilus can
   lready benefit from this.
  </p><p>
   The previous message protocol had no guarantee of data authenticity or data
   encryption. msgr2 uses port 3300, port 6789 is used for the old version.
   When you want to make sure that only msgr2 is used you can block 6789 to
   guarantee that the old protocol will not be used.
  </p><p>
   The default configuration allows SUSE Enterprise Storage to use CRC mode for msgr2.
   You can check this with:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>for option_name in ms_cluster_mode ms_service_mode ms_client_mode; do
        echo -n "$option_name: "
        ceph config get mon $option_name
      done
    ms_cluster_mode: crc secure
    ms_service_mode: crc secure
    ms_client_mode: crc secure</pre></div><p>
   Currently only clients build on librbd support secure mode, but the kernel
   client does not. You can set secure mode only for the cluster internal
   communication by setting the <code class="option">ms_cluster_mode</code> option to
   <code class="literal">secure</code>. If you have a client landscape that allows you to
   enforce secure mode you can also set the <code class="option">ms_service_mode</code>
   and <code class="option">ms_client_mode</code> options to <code class="literal">secure</code>.
  </p><p>
   This might cause performance issues for your setup, so you need to test this
   first. If you run into performance issues you can enable secure mode only
   for select daemons, for example if the <code class="option">ms_cluster_mode</code>
   option allows you to force secure mode for Ceph Monitor while keeping a different
   setting for other services.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="ceph-hardening-measures-authentication.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 6 </span>Authentication</span></a> </div><div><a class="pagination-link next" href="bk04go01.html"><span class="pagination-relation">Next</span><span class="pagination-label">Glossary</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="ceph-hardening-measures-confidentiality.html#data-at-rest"><span class="title-number">7.1 </span><span class="title-name">Data at rest</span></a></span></li><li><span class="sect1"><a href="ceph-hardening-measures-confidentiality.html#data-in-flight"><span class="title-number">7.2 </span><span class="title-name">Data in flight</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2023</span></div></div></footer></body></html>