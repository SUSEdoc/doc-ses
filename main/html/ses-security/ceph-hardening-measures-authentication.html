<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>Authentication | Security Hardening Guide | SUSE Enterprise Storage 7.1</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Authentication | SES 7.1"/>
<meta name="description" content="Ensuring that clients need to authenticate before accessing ressources on SUSE Enterprise Storage is important to the security of the system. Allowin…"/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="7.1"/>
<meta name="book-title" content="Security Hardening Guide"/>
<meta name="chapter-title" content="Chapter 6. Authentication"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="tbazant"/>
<meta name="tracker-gh-template" content="&#10;     ### Type of report&#10;   - [ ] bug&#10;   - [ ] feature request&#10;&#10;### Source Document&#10;@@source@@&#10;&#10;### Summary&#10;&lt;!-- A clear and concise description of what the bug/feature request is. --&gt;&#10;&#10;### Steps To Reproduce&#10;&lt;!-- Steps to reproduce the behavior if you ran through steps in the document. --&gt;&#10;&#10;### Expected Results&#10;&lt;!-- A clear and concise description of what you expected to happen. --&gt;&#10;&#10;### Actual Results&#10;&lt;!-- Explain what actually happened if steps were executed, and if applicable, add screenshots to help explain your problem. --&gt;&#10;&#10;### Notes&#10;&lt;!-- Add any other context about the problem here. --&gt;&#10;&#10;    "/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="Authentication | SES 7.1"/>
<meta property="og:description" content="Ensuring that clients need to authenticate before accessing ressources on SUSE Enterprise Storage is important to the security of the system. Allowin…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Authentication | SES 7.1"/>
<meta name="twitter:description" content="Ensuring that clients need to authenticate before accessing ressources on SUSE Enterprise Storage is important to the security of the system. Allowin…"/>
<link rel="prev" href="ceph-hardening-measures-dos.html" title="Chapter 5. Prevent Denial Of Service (DoS)"/><link rel="next" href="ceph-hardening-measures-confidentiality.html" title="Chapter 7. Confidentiality"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Security Hardening Guide</a><span> / </span><a class="crumb" href="ceph-security-hardening-meassures.html">Hardening meassures</a><span> / </span><a class="crumb" href="ceph-hardening-measures-authentication.html">Authentication</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Security Hardening Guide</div><ol><li><a href="preface-security.html" class=" "><span class="title-number"> </span><span class="title-name">About this guide</span></a></li><li><a href="ceph-security-hardening-initial.html" class="has-children "><span class="title-number">I </span><span class="title-name">Introduction</span></a><ol><li><a href="ceph-hardening1.html" class=" "><span class="title-number">1 </span><span class="title-name">Understanding the threat</span></a></li><li><a href="ceph-hardening2.html" class=" "><span class="title-number">2 </span><span class="title-name">About this guide</span></a></li></ol></li><li class="active"><a href="ceph-security-hardening-meassures.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Hardening meassures</span></a><ol><li><a href="ceph-hardening-measures-general.html" class=" "><span class="title-number">3 </span><span class="title-name">General</span></a></li><li><a href="ceph-hardening-measures-network.html" class=" "><span class="title-number">4 </span><span class="title-name">Network</span></a></li><li><a href="ceph-hardening-measures-dos.html" class=" "><span class="title-number">5 </span><span class="title-name">Prevent Denial Of Service (DoS)</span></a></li><li><a href="ceph-hardening-measures-authentication.html" class=" you-are-here"><span class="title-number">6 </span><span class="title-name">Authentication</span></a></li><li><a href="ceph-hardening-measures-confidentiality.html" class=" "><span class="title-number">7 </span><span class="title-name">Confidentiality</span></a></li></ol></li><li><a href="bk04go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="ceph-hardening-measures-authentication" data-id-title="Authentication"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">7.1</span></div><div><h1 class="title"><span class="title-number">6 </span><span class="title-name">Authentication</span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-authentication.html#">#</a></h1></div></div></div><p>
  Ensuring that clients need to authenticate before accessing ressources on
  SUSE Enterprise Storage is important to the security of the system. Allowing anonymous
  usage or weak authentication schemes should be avoided.
 </p><section class="sect1" id="strong-authentication" data-id-title="Enabling strong authentication"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.1 </span><span class="title-name">Enabling strong authentication</span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-authentication.html#strong-authentication">#</a></h2></div></div></div><p>
   Enforce strong authentication whenever possible: <code class="systemitem">cephx</code> works by having a
   secret key shared between the client and the service. This way both sides
   can prove to each other that they are who they claim to be. <code class="systemitem">cephx</code> is the
   default authentication scheme and should not be replaced by weaker methods.
  </p><p>
   <code class="systemitem">cephx</code> is enabled by default for communication in the cluster itself
   (<code class="literal">auth_cluster_required</code>) and for the communication between
   the client and the cluster (<code class="literal">auth_service_required</code>). You
   can check this by running the following:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>for option_name in auth_cluster_required auth_service_required auth_client_required ; do
        echo -n "$option_name: "
        ceph config get mon $option_name
      done
    auth_cluster_required: cephx
    auth_service_required: cephx
    auth_client_required: cephx, none</pre></div><p>
   You can also enable <code class="literal">auth_client_required</code> to force the
   SUSE Enterprise Storage cluster to authenticate towards clients to prevent malicious
   actors from impersonating services. This is done by setting
   <code class="literal">auth_client_required</code> to <code class="systemitem">cephx</code> only with the
   <code class="command">ceph config set global auth_client_required cephx</code>
   command.
  </p><p>
   <code class="systemitem">cephx</code> is only concerned with authentication. It does not ensure that the
   data is encrypted when sent to the cluster (in transport) or when stored in
   the cluster (at rest). When chosing a way for clients to access the cluster,
   select a access method that ensures the confidentiality in transport (for
   example, use HTTPS when using RADOS). For more details about <code class="systemitem">cephx</code>, see
   <span class="intraxref">Book “Administration and Operations Guide”, Chapter 30 “Authentication with <code class="systemitem">cephx</code>”, Section 30.1 “Authentication architecture”</span>.
  </p><p>
   You can enforce message signing to harden the authentication protocol. With
   the <code class="command">ceph config set global cephx_require_signatures true</code>
   command, you can force that signatures are used on all messages between the
   client and the cluster and in between the daemons in the cluster.If you run
   into issue with clients not being able to properly sign their messages you
   can enable it only for use within the cluster with the <code class="command">ceph config
   set global cephx_cluster_require_signatures</code> command.
  </p><p>
   Strong authentication also requires proper key handling from the creation to
   the destruction of keys. Each client should receive a separate key which
   shouldn't be reused, at least not for clients with different security
   properties. With that you can then give the least amount of privileges to
   each account that is necessary, therefor limiting the risk. Creating users
   is covered in <span class="intraxref">Book “Administration and Operations Guide”, Chapter 20 “RADOS Block Device”, Section 20.2.1 “Creating a Ceph user account”</span>.
  </p></section><section class="sect1" id="ensure-secure-storage-keys" data-id-title="Ensuring secure storage of keys"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.2 </span><span class="title-name">Ensuring secure storage of keys</span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-authentication.html#ensure-secure-storage-keys">#</a></h2></div></div></div><p>
   Keys must be stored with safe permissions on the client machine to prevent
   credential leakage. In most cases this means that only the user and root is
   able to read the key material. If you have a setup where you need to provide
   broader access you need to think through the security implications that
   accidential or malicious leaks of the key material has in your environment.
  </p><p>
   By default, key material is stored in a safe way on SUSE Enterprise Storage and you
   need to make sure that you do the same when transferring key material to
   clients. This means that you use secure transport mechanisms (HTTPs, SSH) to
   transfer the key and set strict permissions of files storing key material.
   Depending on your security requirements the use of vault services or
   hardware security modules might be appropriate.
  </p><p>
   Also consider your backup scheme to ensure that keys are secure during the
   whole life cycle. The backup of keys must meet the same security standards
   as the other systems that store a key dufing its lifetime.
  </p></section><section class="sect1" id="account-setup-security" data-id-title="Account setup"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.3 </span><span class="title-name">Account setup</span> <a title="Permalink" class="permalink" href="ceph-hardening-measures-authentication.html#account-setup-security">#</a></h2></div></div></div><p>
   In the initial configuration, you have administrative accounts that hold all
   the power. Depending on your regulatory and other requirements, you need to
   split up these accounts into several accounts that hold different
   privileges. This allows to assign the least amount of privilege needed to
   fulfill a task.
  </p><p>
   You should create a process that regularly reviews the privileges users have
   and adjust them if necessary. Especially for highly privileged accounts, we
   recommend this happens on a regular basis and every time a user that could
   have modified these settings is removed from the settings. For example, if
   someone changes role and is not the administrator for SUSE Enterprise Storage anymore.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="ceph-hardening-measures-dos.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>Prevent Denial Of Service (DoS)</span></a> </div><div><a class="pagination-link next" href="ceph-hardening-measures-confidentiality.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 7 </span>Confidentiality</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="ceph-hardening-measures-authentication.html#strong-authentication"><span class="title-number">6.1 </span><span class="title-name">Enabling strong authentication</span></a></span></li><li><span class="sect1"><a href="ceph-hardening-measures-authentication.html#ensure-secure-storage-keys"><span class="title-number">6.2 </span><span class="title-name">Ensuring secure storage of keys</span></a></span></li><li><span class="sect1"><a href="ceph-hardening-measures-authentication.html#account-setup-security"><span class="title-number">6.3 </span><span class="title-name">Account setup</span></a></span></li></ul></div><div class="side-title">Give feedback</div><ul class="feedback" id="_give-feedback"><li><a id="_feedback-editurl" href="https://github.com/SUSE/doc-ses/edit/main/xml/hardening_measures_authentication.xml" rel="nofollow" target="_blank">Edit source document</a></li></ul><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>