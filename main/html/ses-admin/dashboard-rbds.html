<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>Manage RADOS Block Device | Administration and Operations Guide | SUSE Enterprise Storage 7.1</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Manage RADOS Block Device | SES 7.1"/>
<meta name="description" content="To list all available RADOS Block Devices (RBDs), click Block › Images from the main menu."/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="7.1"/>
<meta name="book-title" content="Administration and Operations Guide"/>
<meta name="chapter-title" content="Chapter 6. Manage RADOS Block Device"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="tbazant"/>
<meta name="tracker-gh-template" content="&#10;     ### Type of report&#10;   - [ ] bug&#10;   - [ ] feature request&#10;&#10;### Source Document&#10;@@source@@&#10;&#10;### Summary&#10;&lt;!-- A clear and concise description of what the bug/feature request is. --&gt;&#10;&#10;### Steps To Reproduce&#10;&lt;!-- Steps to reproduce the behavior if you ran through steps in the document. --&gt;&#10;&#10;### Expected Results&#10;&lt;!-- A clear and concise description of what you expected to happen. --&gt;&#10;&#10;### Actual Results&#10;&lt;!-- Explain what actually happened if steps were executed, and if applicable, add screenshots to help explain your problem. --&gt;&#10;&#10;### Notes&#10;&lt;!-- Add any other context about the problem here. --&gt;&#10;&#10;    "/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="Manage RADOS Block Device | SES 7.1"/>
<meta property="og:description" content="To list all available RADOS Block Devices (RBDs), click Block › Images from the main menu."/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Manage RADOS Block Device | SES 7.1"/>
<meta name="twitter:description" content="To list all available RADOS Block Devices (RBDs), click Block › Images from the main menu."/>
<link rel="prev" href="dashboard-pools.html" title="Chapter 5. Manage pools"/><link rel="next" href="dash-webui-nfs.html" title="Chapter 7. Manage NFS Ganesha"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Administration and Operations Guide</a><span> / </span><a class="crumb" href="part-dashboard.html">Ceph Dashboard</a><span> / </span><a class="crumb" href="dashboard-rbds.html">Manage RADOS Block Device</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Administration and Operations Guide</div><ol><li><a href="preface-admin.html" class=" "><span class="title-number"> </span><span class="title-name">About this guide</span></a></li><li class="active"><a href="part-dashboard.html" class="has-children you-are-here"><span class="title-number">I </span><span class="title-name">Ceph Dashboard</span></a><ol><li><a href="dashboard-about.html" class=" "><span class="title-number">1 </span><span class="title-name">About the Ceph Dashboard</span></a></li><li><a href="dashboard-webui-general.html" class=" "><span class="title-number">2 </span><span class="title-name">Dashboard's Web user interface</span></a></li><li><a href="dashboard-user-mgmt.html" class=" "><span class="title-number">3 </span><span class="title-name">Manage Ceph Dashboard users and roles</span></a></li><li><a href="dashboard-cluster.html" class=" "><span class="title-number">4 </span><span class="title-name">View cluster internals</span></a></li><li><a href="dashboard-pools.html" class=" "><span class="title-number">5 </span><span class="title-name">Manage pools</span></a></li><li><a href="dashboard-rbds.html" class=" you-are-here"><span class="title-number">6 </span><span class="title-name">Manage RADOS Block Device</span></a></li><li><a href="dash-webui-nfs.html" class=" "><span class="title-number">7 </span><span class="title-name">Manage NFS Ganesha</span></a></li><li><a href="dashboard-mds.html" class=" "><span class="title-number">8 </span><span class="title-name">Manage CephFS</span></a></li><li><a href="dashboard-ogw.html" class=" "><span class="title-number">9 </span><span class="title-name">Manage the Object Gateway</span></a></li><li><a href="dashboard-initial-configuration.html" class=" "><span class="title-number">10 </span><span class="title-name">Manual configuration</span></a></li><li><a href="dashboard-user-roles.html" class=" "><span class="title-number">11 </span><span class="title-name">Manage users and roles on the command line</span></a></li></ol></li><li><a href="part-cluster-operation.html" class="has-children "><span class="title-number">II </span><span class="title-name">Cluster Operation</span></a><ol><li><a href="ceph-monitor.html" class=" "><span class="title-number">12 </span><span class="title-name">Determine the cluster state</span></a></li><li><a href="storage-salt-cluster.html" class=" "><span class="title-number">13 </span><span class="title-name">Operational tasks</span></a></li><li><a href="cha-ceph-operating.html" class=" "><span class="title-number">14 </span><span class="title-name">Operation of Ceph services</span></a></li><li><a href="cha-deployment-backup.html" class=" "><span class="title-number">15 </span><span class="title-name">Backup and restore</span></a></li><li><a href="monitoring-alerting.html" class=" "><span class="title-number">16 </span><span class="title-name">Monitoring and alerting</span></a></li></ol></li><li><a href="part-storing-data.html" class="has-children "><span class="title-number">III </span><span class="title-name">Storing Data in a Cluster</span></a><ol><li><a href="cha-storage-datamgm.html" class=" "><span class="title-number">17 </span><span class="title-name">Stored data management</span></a></li><li><a href="ceph-pools.html" class=" "><span class="title-number">18 </span><span class="title-name">Manage storage pools</span></a></li><li><a href="cha-ceph-erasure.html" class=" "><span class="title-number">19 </span><span class="title-name">Erasure coded pools</span></a></li><li><a href="ceph-rbd.html" class=" "><span class="title-number">20 </span><span class="title-name">RADOS Block Device</span></a></li></ol></li><li><a href="part-accessing-data.html" class="has-children "><span class="title-number">IV </span><span class="title-name">Accessing Cluster Data</span></a><ol><li><a href="cha-ceph-gw.html" class=" "><span class="title-number">21 </span><span class="title-name">Ceph Object Gateway</span></a></li><li><a href="cha-ceph-iscsi.html" class=" "><span class="title-number">22 </span><span class="title-name">Ceph iSCSI gateway</span></a></li><li><a href="cha-ceph-cephfs.html" class=" "><span class="title-number">23 </span><span class="title-name">Clustered file system</span></a></li><li><a href="cha-ses-cifs.html" class=" "><span class="title-number">24 </span><span class="title-name">Export Ceph data via Samba</span></a></li><li><a href="cha-ceph-nfsganesha.html" class=" "><span class="title-number">25 </span><span class="title-name">NFS Ganesha</span></a></li></ol></li><li><a href="part-integration-virt.html" class="has-children "><span class="title-number">V </span><span class="title-name">Integration with Virtualization Tools</span></a><ol><li><a href="cha-ceph-libvirt.html" class=" "><span class="title-number">26 </span><span class="title-name"><code class="systemitem">libvirt</code> and Ceph</span></a></li><li><a href="cha-ceph-kvm.html" class=" "><span class="title-number">27 </span><span class="title-name">Ceph as a back-end for QEMU KVM instance</span></a></li></ol></li><li><a href="part-cluster-configuration.html" class="has-children "><span class="title-number">VI </span><span class="title-name">Configuring a Cluster</span></a><ol><li><a href="cha-ceph-configuration.html" class=" "><span class="title-number">28 </span><span class="title-name">Ceph cluster configuration</span></a></li><li><a href="cha-mgr-modules.html" class=" "><span class="title-number">29 </span><span class="title-name">Ceph Manager modules</span></a></li><li><a href="cha-storage-cephx.html" class=" "><span class="title-number">30 </span><span class="title-name">Authentication with <code class="systemitem">cephx</code></span></a></li></ol></li><li><a href="bk02apa.html" class=" "><span class="title-number">A </span><span class="title-name">Ceph maintenance updates based on upstream 'Pacific' point releases</span></a></li><li><a href="bk02go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="dashboard-rbds" data-id-title="Manage RADOS Block Device"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">7.1</span></div><div><h1 class="title"><span class="title-number">6 </span><span class="title-name">Manage RADOS Block Device</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#">#</a></h1></div></div></div><p>
  To list all available RADOS Block Devices (RBDs), click
  <span class="guimenu">Block</span> › <span class="guimenu">Images</span>
  from the main menu.
 </p><p>
  The list shows brief information about the device, such as the device's name,
  the related pool name, namespace, size of the device, number and size of
  objects on the device, details on the provisioning of the details, and the
  parent.
 </p><div class="figure" id="id-1.4.3.7.5"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_rbd_images.png"><img src="images/dash_rbd_images.png" width="100%" alt="List of RBD images" title="List of RBD images"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.1: </span><span class="title-name">List of RBD images </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.5">#</a></div></div></div><section class="sect1" id="dashboard-rbds-details" data-id-title="Viewing details about RBDs"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.1 </span><span class="title-name">Viewing details about RBDs</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-rbds-details">#</a></h2></div></div></div><p>
   To view more detailed information about a device, click its row in the
   table:
  </p><div class="figure" id="id-1.4.3.7.6.3"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_rbd_images_details.png"><img src="images/dash_rbd_images_details.png" width="100%" alt="RBD details" title="RBD details"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.2: </span><span class="title-name">RBD details </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.6.3">#</a></div></div></div></section><section class="sect1" id="dashboard-rbds-configuration" data-id-title="Viewing RBDs configuration"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.2 </span><span class="title-name">Viewing RBD's configuration</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-rbds-configuration">#</a></h2></div></div></div><p>
   To view detailed configuration of a device, click its row in the table and
   then the <span class="guimenu">Configuration</span> tab in the lower table:
  </p><div class="figure" id="id-1.4.3.7.7.3"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_rbd_images_config.png"><img src="images/dash_rbd_images_config.png" width="100%" alt="RBD configuration" title="RBD configuration"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.3: </span><span class="title-name">RBD configuration </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.7.3">#</a></div></div></div></section><section class="sect1" id="dashboard-rbds-create" data-id-title="Creating RBDs"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.3 </span><span class="title-name">Creating RBDs</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-rbds-create">#</a></h2></div></div></div><p>
   To add a new device, click <span class="guimenu">Create</span> in the top left of the
   table heading and do the following on the <span class="guimenu">Create RBD</span>
   screen:
  </p><div class="figure" id="id-1.4.3.7.8.3"><div class="figure-contents"><div class="mediaobject"><a href="images/oa_rbd_add.png"><img src="images/oa_rbd_add.png" width="100%" alt="Adding a new RBD" title="Adding a new RBD"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.4: </span><span class="title-name">Adding a new RBD </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.8.3">#</a></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
     Enter the name of the new device. Refer to <span class="intraxref">Book “Deployment Guide”, Chapter 2 “Hardware requirements and recommendations”, Section 2.11 “Name limitations”</span>
     for naming limitations.
    </p></li><li class="step"><p>
     Select the pool with the <code class="option">rbd</code> application assigned from
     which the new RBD device will be created.
    </p></li><li class="step"><p>
     Specify the size of the new device.
    </p></li><li class="step"><p>
     Specify additional options for the device. To fine-tune the device
     parameters, click <span class="guimenu">Advanced</span> and enter values for object
     size, stripe unit, or stripe count. To enter Quality of Service (QoS)
     limits, click <span class="guimenu">Quality of Service</span> and enter them.
    </p></li><li class="step"><p>
     Confirm with <span class="guimenu">Create RBD</span>.
    </p></li></ol></div></div></section><section class="sect1" id="dashboard-rbd-delete" data-id-title="Deleting RBDs"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.4 </span><span class="title-name">Deleting RBDs</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-rbd-delete">#</a></h2></div></div></div><p>
   To delete a device, select the device in the table row. Click the drop-down
   arrow next to the <span class="guimenu">Create</span> button and click
   <span class="guimenu">Delete</span>. Confirm the deletion with <span class="guimenu">Delete
   RBD</span>.
  </p><div id="id-1.4.3.7.9.3" data-id-title="Moving RBDs to trash" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Moving RBDs to trash</div><p>
    Deleting an RBD is an irreversible action. If you <span class="guimenu">Move to
    Trash</span> instead, you can restore the device later on by selecting
    it on the <span class="guimenu">Trash</span> tab of the main table and clicking
    <span class="guimenu">Restore</span> in the top left of the table heading.
   </p></div></section><section class="sect1" id="dashboard-rbds-snapshots" data-id-title="Creating RADOS Block Device snapshots"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.5 </span><span class="title-name">Creating RADOS Block Device snapshots</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-rbds-snapshots">#</a></h2></div></div></div><p>
   To create a RADOS Block Device snapshot, select the device in the table row and the
   detailed configuration content pane appears. Select the
   <span class="guimenu">Snapshots</span> tab and click <span class="guimenu">Create</span> in the
   top left of the table heading. Enter the snapshot's name and confirm with
   <span class="guimenu">Create RBD Snapshot</span>.
  </p><p>
   After selecting a snapshot, you can perform additional actions on the
   device, such as rename, protect, clone, copy, or delete.
   <span class="guimenu">Rollback</span> restores the device's state from the current
   snapshot.
  </p><div class="figure" id="id-1.4.3.7.10.4"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_rbd_images_snapshots.png"><img src="images/dash_rbd_images_snapshots.png" width="100%" alt="RBD snapshots" title="RBD snapshots"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.5: </span><span class="title-name">RBD snapshots </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.10.4">#</a></div></div></div></section><section class="sect1" id="dash-rbd-mirror" data-id-title="RBD mirroring"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.6 </span><span class="title-name">RBD mirroring</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-mirror">#</a></h2></div></div></div><p>
   RADOS Block Device images can be asynchronously mirrored between two Ceph clusters. You
   can use the Ceph Dashboard to configure replication of RBD images between two
   or more clusters. This capability is available in two modes:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.3.7.11.3.1"><span class="term">Journal-based</span></dt><dd><p>
      This mode uses the RBD journaling image feature to ensure point-in-time,
      crash-consistent replication between clusters.
     </p></dd><dt id="id-1.4.3.7.11.3.2"><span class="term">Snapshot-based</span></dt><dd><p>
      This mode uses periodically scheduled or manually created RBD image
      mirror-snapshots to replicate crash-consistent RBD images between
      clusters.
     </p></dd></dl></div><p>
   Mirroring is configured on a per-pool basis within peer clusters and can be
   configured on a specific subset of images within the pool or configured to
   automatically mirror all images within a pool when using journal-based
   mirroring only.
  </p><p>
   Mirroring is configured using the <code class="command">rbd</code> command, which is
   installed by default in SUSE Enterprise Storage 7.1. The
   <code class="systemitem">rbd-mirror</code> daemon is responsible for
   pulling image updates from the remote, peer cluster and applying them to the
   image within the local cluster. See
   <a class="xref" href="dashboard-rbds.html#rbd-mirror-daemon-enable" title="6.6.2. Enabling the rbd-mirror daemon">Section 6.6.2, “Enabling the <code class="systemitem">rbd-mirror</code> daemon”</a> for more information on enabling
   the <code class="systemitem">rbd-mirror</code> daemon.
  </p><p>
   Depending on the need for replication, RADOS Block Device mirroring can be configured for
   either one- or two-way replication:
  </p><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.3.7.11.7.1"><span class="term">One-way Replication</span></dt><dd><p>
      When data is only mirrored from a primary cluster to a secondary cluster,
      the <code class="systemitem">rbd-mirror</code> daemon runs only
      on the secondary cluster.
     </p></dd><dt id="id-1.4.3.7.11.7.2"><span class="term">Two-way Replication</span></dt><dd><p>
      When data is mirrored from primary images on one cluster to non-primary
      images on another cluster (and vice-versa), the
      <code class="systemitem">rbd-mirror</code> daemon runs on both
      clusters.
     </p></dd></dl></div><div id="id-1.4.3.7.11.8" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important</div><p>
    Each instance of the <code class="systemitem">rbd-mirror</code>
    daemon must be able to connect to both the local and remote Ceph clusters
    simultaneously, for example all monitor and OSD hosts. Additionally, the
    network must have sufficient bandwidth between the two data centers to
    handle mirroring workload.
   </p></div><div id="id-1.4.3.7.11.9" data-id-title="General information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: General information</div><p>
    For general information and the command line approach to RADOS Block Device mirroring,
    refer to <a class="xref" href="ceph-rbd.html#ceph-rbd-mirror" title="20.4. RBD image mirrors">Section 20.4, “RBD image mirrors”</a>.
   </p></div><section class="sect2" id="rbd-mirror-primary-secondary" data-id-title="Configuring primary and secondary clusters"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.1 </span><span class="title-name">Configuring primary and secondary clusters</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-primary-secondary">#</a></h3></div></div></div><p>
    A <span class="emphasis"><em>primary</em></span> cluster is where the original pool with
    images is created. A <span class="emphasis"><em>secondary</em></span> cluster is where the
    pool or images are replicated from the <span class="emphasis"><em>primary</em></span>
    cluster.
   </p><div id="id-1.4.3.7.11.10.3" data-id-title="Relative naming" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note: Relative naming</div><p>
     The <span class="emphasis"><em>primary</em></span> and <span class="emphasis"><em>secondary</em></span> terms
     can be relative in the context of replication because they relate more to
     individual pools than to clusters. For example, in two-way replication,
     one pool can be mirrored from the <span class="emphasis"><em>primary</em></span> cluster to
     the <span class="emphasis"><em>secondary</em></span> one, while another pool can be mirrored
     from the <span class="emphasis"><em>secondary</em></span> cluster to the
     <span class="emphasis"><em>primary</em></span> one.
    </p></div></section><section class="sect2" id="rbd-mirror-daemon-enable" data-id-title="Enabling the rbd-mirror daemon"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.2 </span><span class="title-name">Enabling the <code class="systemitem">rbd-mirror</code> daemon</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-daemon-enable">#</a></h3></div></div></div><p>
    The following procedures demonstrate how to perform the basic
    administrative tasks to configure mirroring using the
    <code class="command">rbd</code> command. Mirroring is configured on a per-pool basis
    within the Ceph clusters.
   </p><p>
    The pool configuration steps should be performed on both peer clusters.
    These procedures assume two clusters, named “primary” and
    “secondary”, are accessible from a single host for clarity.
   </p><p>
    The <code class="systemitem">rbd-mirror</code> daemon performs the
    actual cluster data replication.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Rename <code class="filename">ceph.conf</code> and keyring files and copy them
      from the primary host to the secondary host:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@secondary &gt; </code>cp /etc/ceph/ceph.conf /etc/ceph/primary.conf
<code class="prompt user">cephuser@secondary &gt; </code>cp /etc/ceph/ceph.admin.client.keyring \
 /etc/ceph/primary.client.admin.keyring
<code class="prompt user">cephuser@secondary &gt; </code>scp <em class="replaceable">PRIMARY_HOST</em>:/etc/ceph/ceph.conf \
 /etc/ceph/secondary.conf
<code class="prompt user">cephuser@secondary &gt; </code>scp  <em class="replaceable">PRIMARY_HOST</em>:/etc/ceph/ceph.client.admin.keyring \
 /etc/ceph/secondary.client.admin.keyring</pre></div></li><li class="step"><p>
      To enable mirroring on a pool with <code class="command">rbd</code>, specify the
      <code class="command">mirror pool enable</code>, the pool name, and the mirroring
      mode:
     </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>rbd mirror pool enable <em class="replaceable">POOL_NAME</em> <em class="replaceable">MODE</em></pre></div><div id="id-1.4.3.7.11.11.5.2.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
       The mirroring mode can either be <code class="literal">image</code> or
       <code class="literal">pool</code>. For example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@secondary &gt; </code>rbd --cluster primary mirror pool enable image-pool image
<code class="prompt user">cephuser@secondary &gt; </code>rbd --cluster secondary mirror pool enable image-pool image</pre></div></div></li><li class="step"><p>
      On the Ceph Dashboard, navigate to
      <span class="guimenu">Block</span> › <span class="guimenu">Mirroring</span>.
      The <span class="guimenu">Daemons</span> table to the left shows actively running
      <code class="systemitem">rbd-mirror</code> daemons and their
      health.
     </p><div class="figure" id="id-1.4.3.7.11.11.5.3.2"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-daemon.png"><img src="images/rbd-mirror-daemon.png" width="100%" alt="Running rbd-mirror daemons" title="Running rbd-mirror daemons"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.6: </span><span class="title-name">Running <code class="systemitem">rbd-mirror</code> daemons </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.11.5.3.2">#</a></div></div></div></li></ol></div></div></section><section class="sect2" id="rbd-mirror-disable" data-id-title="Disabling mirroring"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.3 </span><span class="title-name">Disabling mirroring</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-disable">#</a></h3></div></div></div><p>
    To disable mirroring on a pool with <code class="command">rbd</code>, specify the
    <code class="command">mirror pool disable</code> command and the pool name:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>rbd mirror pool disable <em class="replaceable">POOL_NAME</em></pre></div><p>
    When mirroring is disabled on a pool in this way, mirroring will also be
    disabled on any images (within the pool) for which mirroring was enabled
    explicitly.
   </p></section><section class="sect2" id="rbd-mirror-peer-bootstrap" data-id-title="Bootstrapping peers"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.4 </span><span class="title-name">Bootstrapping peers</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-peer-bootstrap">#</a></h3></div></div></div><p>
    In order for the <code class="systemitem">rbd-mirror</code> to
    discover its peer cluster, the peer needs to be registered to the pool and
    a user account needs to be created. This process can be automated with
    <code class="command">rbd</code> by using the <code class="command">mirror pool peer bootstrap
    create</code> and <code class="command">mirror pool peer bootstrap import</code>
    commands.
   </p><p>
    To manually create a new bootstrap token with <code class="command">rbd</code>,
    specify the <code class="command">mirror pool peer bootstrap create</code> command, a
    pool name, along with an optional site name to describe the local cluster:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>rbd mirror pool peer bootstrap create [--site-name <em class="replaceable">local-site-name</em>] <em class="replaceable">pool-name</em></pre></div><p>
    The output of <code class="command">mirror pool peer bootstrap create</code> will be
    a token that should be provided to the <code class="command">mirror pool peer bootstrap
    import</code> command. For example, on the primary cluster:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>rbd --cluster primary mirror pool peer bootstrap create --site-name primary
  image-pool eyJmc2lkIjoiOWY1MjgyZGItYjg5OS00NTk2LTgwOTgtMzIwYzFmYzM5NmYzIiwiY2xpZW50X2lkIjoicmJkL \
  W1pcnJvci1wZWVyIiwia2V5IjoiQVFBUnczOWQwdkhvQmhBQVlMM1I4RmR5dHNJQU50bkFTZ0lOTVE9PSIsIm1vbl9ob3N0I \
  joiW3YyOjE5Mi4xNjguMS4zOjY4MjAsdjE6MTkyLjE2OC4xLjM6NjgyMV0ifQ==</pre></div><p>
    To manually import the bootstrap token created by another cluster with the
    <code class="command">rbd</code> command, specify the <code class="command">mirror pool peer
    bootstrap import</code> command, the pool name, a file path to the
    created token (or ‘-‘ to read from standard input), along with an
    optional site name to describe the local cluster and a mirroring direction
    (defaults to <code class="literal">rx-tx</code> for bidirectional mirroring, but can
    also be set to <code class="literal">rx-only</code> for unidirectional mirroring):
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>rbd mirror pool peer bootstrap import [--site-name <em class="replaceable">local-site-name</em>] \
[--direction <em class="replaceable">rx-only or rx-tx</em>] <em class="replaceable">pool-name</em> <em class="replaceable">token-path</em></pre></div><p>
    For example, on the secondary cluster:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>cat &gt;&gt;EOF &lt; token
eyJmc2lkIjoiOWY1MjgyZGItYjg5OS00NTk2LTgwOTgtMzIwYzFmYzM5NmYzIiwiY2xpZW50X2lkIjoicmJkLW1pcn \
Jvci1wZWVyIiwia2V5IjoiQVFBUnczOWQwdkhvQmhBQVlMM1I4RmR5dHNJQU50bkFTZ0lOTVE9PSIsIm1vbl9ob3N0I \
joiW3YyOjE5Mi4xNjguMS4zOjY4MjAsdjE6MTkyLjE2OC4xLjM6NjgyMV0ifQ==
EOF
<code class="prompt user">cephuser@adm &gt; </code>rbd --cluster secondary mirror pool peer bootstrap import --site-name secondary image-pool token</pre></div></section><section class="sect2" id="rbd-mirror-remove-peers" data-id-title="Removing cluster peer"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.5 </span><span class="title-name">Removing cluster peer</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-remove-peers">#</a></h3></div></div></div><p>
    To remove a mirroring peer Ceph cluster with the <code class="command">rbd</code>
    command, specify the <code class="command">mirror pool peer remove</code> command,
    the pool name, and the peer UUID (available from the <code class="command">rbd mirror
    pool info</code> command):
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>rbd mirror pool peer remove <em class="replaceable">pool-name</em> <em class="replaceable">peer-uuid</em></pre></div></section><section class="sect2" id="rbd-mirror-gui-config" data-id-title="Configuring pool replication in the Ceph Dashboard"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.6 </span><span class="title-name">Configuring pool replication in the Ceph Dashboard</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-gui-config">#</a></h3></div></div></div><p>
    The <code class="systemitem">rbd-mirror</code> daemon needs to have
    access to the primary cluster to be able to mirror RBD images. Ensure you
    have followed the steps in <a class="xref" href="dashboard-rbds.html#rbd-mirror-peer-bootstrap" title="6.6.4. Bootstrapping peers">Section 6.6.4, “Bootstrapping peers”</a>
    before continuing.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      On both the <span class="emphasis"><em>primary</em></span> and
      <span class="emphasis"><em>secondary</em></span> cluster, create pools with an identical
      name and assign the <code class="literal">rbd</code> application to them. Refer to
      <a class="xref" href="dashboard-pools.html#dashboard-pools-create" title="5.1. Adding a new pool">Section 5.1, “Adding a new pool”</a> for more details on creating a
      new pool.
     </p><div class="figure" id="id-1.4.3.7.11.15.3.1.2"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-pool.png"><img src="images/rbd-mirror-pool.png" width="100%" alt="Creating a pool with RBD application" title="Creating a pool with RBD application"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.7: </span><span class="title-name">Creating a pool with RBD application </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.15.3.1.2">#</a></div></div></div></li><li class="step"><p>
      On both the <span class="emphasis"><em>primary</em></span> and
      <span class="emphasis"><em>secondary</em></span> cluster's dashboards, navigate to
      <span class="guimenu">Block</span> › <span class="guimenu">Mirroring</span>.
      In the <span class="guimenu">Pools</span> table on the right, click the name of the
      pool to replicate, and after clicking <span class="guimenu">Edit Mode</span>,
      select the replication mode. In this example, we will work with a
      <span class="emphasis"><em>pool</em></span> replication mode, which means that all images
      within a given pool will be replicated. Confirm with
      <span class="guimenu">Update</span>.
     </p><div class="figure" id="id-1.4.3.7.11.15.3.2.2"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-pool-mode.png"><img src="images/rbd-mirror-pool-mode.png" width="100%" alt="Configuring the replication mode" title="Configuring the replication mode"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.8: </span><span class="title-name">Configuring the replication mode </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.15.3.2.2">#</a></div></div></div><div id="id-1.4.3.7.11.15.3.2.3" data-id-title="Error or warning on the primary cluster" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><div class="admon-title">Important: Error or warning on the primary cluster</div><p>
       After updating the replication mode, an error or warning flag will
       appear in the corresponding right column. That is because the pool has
       no peer user for replication assigned yet. Ignore this flag for the
       <span class="emphasis"><em>primary</em></span> cluster as we assign a peer user to the
       <span class="emphasis"><em>secondary</em></span> cluster only.
      </p></div></li><li class="step"><p>
      On the <span class="emphasis"><em>secondary</em></span> cluster's Dashboard, navigate to
      <span class="guimenu">Block</span> › <span class="guimenu">Mirroring</span>.
      Add the pool mirror peer by selecting <span class="guimenu">Add Peer</span>.
      Provide the <span class="emphasis"><em>primary</em></span> cluster's details:
     </p><div class="figure" id="id-1.4.3.7.11.15.3.3.2"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-pool-peer.png"><img src="images/rbd-mirror-pool-peer.png" width="100%" alt="Adding peer credentials" title="Adding peer credentials"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.9: </span><span class="title-name">Adding peer credentials </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.15.3.3.2">#</a></div></div></div><div class="variablelist"><dl class="variablelist"><dt id="id-1.4.3.7.11.15.3.3.3.1"><span class="term"><span class="guimenu">Cluster Name</span></span></dt><dd><p>
         An arbitrary unique string that identifies the primary cluster, such
         as 'primary'. The cluster name needs to be different from the real
         secondary cluster's name.
        </p></dd><dt id="id-1.4.3.7.11.15.3.3.3.2"><span class="term"><span class="guimenu">CephX ID</span></span></dt><dd><p>
         The Ceph user ID that you created as a mirroring peer. In this
         example it is 'rbd-mirror-peer'.
        </p></dd><dt id="id-1.4.3.7.11.15.3.3.3.3"><span class="term"><span class="guimenu">Monitor Addresses</span></span></dt><dd><p>
         Comma-separated list of IP addresses of the primary cluster's Ceph Monitor
         nodes.
        </p></dd><dt id="id-1.4.3.7.11.15.3.3.3.4"><span class="term"><span class="guimenu">CephX Key</span></span></dt><dd><p>
         The key related to the peer user ID. You can retrieve it by running
         the following example command on the primary cluster:
        </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">cephuser@adm &gt; </code>ceph auth print_key <em class="replaceable">pool-mirror-peer-name</em></pre></div></dd></dl></div><p>
      Confirm with <span class="guimenu">Submit</span>.
     </p><div class="figure" id="id-1.4.3.7.11.15.3.3.5"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-pool-list.png"><img src="images/rbd-mirror-pool-list.png" width="100%" alt="List of replicated pools" title="List of replicated pools"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.10: </span><span class="title-name">List of replicated pools </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.15.3.3.5">#</a></div></div></div></li></ol></div></div></section><section class="sect2" id="rbd-mirror-test" data-id-title="Verifying that RBD image replication works"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.6.7 </span><span class="title-name">Verifying that RBD image replication works</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#rbd-mirror-test">#</a></h3></div></div></div><p>
    When the <code class="systemitem">rbd-mirror</code> daemon is
    running and RBD image replication is configured on the Ceph Dashboard, it is
    time to verify whether the replication actually works:
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      On the <span class="emphasis"><em>primary</em></span> cluster's Ceph Dashboard, create an RBD
      image so that its parent pool is the pool that you already created for
      replication purposes. Enable the <code class="option">Exclusive lock</code> and
      <code class="option">Journaling</code> features for the image. Refer to
      <a class="xref" href="dashboard-rbds.html#dashboard-rbds-create" title="6.3. Creating RBDs">Section 6.3, “Creating RBDs”</a> for details on how to create RBD
      images.
     </p><div class="figure" id="id-1.4.3.7.11.16.3.1.2"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-image.png"><img src="images/rbd-mirror-image.png" width="100%" alt="New RBD image" title="New RBD image"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.11: </span><span class="title-name">New RBD image </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.16.3.1.2">#</a></div></div></div></li><li class="step"><p>
      After you create the image that you want to replicate, open the
      <span class="emphasis"><em>secondary</em></span> cluster's Ceph Dashboard and navigate to
      <span class="guimenu">Block</span> › <span class="guimenu">Mirroring</span>.
      The <span class="guimenu">Pools</span> table on the right will reflect the change
      in the number of <span class="guimenu"># Remote</span> images and synchronize the
      number of <span class="guimenu"># Local</span> images.
     </p><div class="figure" id="id-1.4.3.7.11.16.3.2.2"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-pool-list-1.png"><img src="images/rbd-mirror-pool-list-1.png" width="100%" alt="New RBD image synchronized" title="New RBD image synchronized"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.12: </span><span class="title-name">New RBD image synchronized </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.16.3.2.2">#</a></div></div></div><div id="id-1.4.3.7.11.16.3.2.3" data-id-title="Replication progress" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Replication progress</div><p>
       The <span class="guimenu">Images</span> table at the bottom of the page shows the
       status of replication of RBD images. The <span class="guimenu">Issues</span> tab
       includes possible problems, the <span class="guimenu">Syncing</span> tab displays
       the progress of image replication, and the <span class="guimenu">Ready</span> tab
       lists all images with successful replication.
      </p><div class="figure" id="id-1.4.3.7.11.16.3.2.3.3"><div class="figure-contents"><div class="mediaobject"><a href="images/rbd-mirror-images-status.png"><img src="images/rbd-mirror-images-status.png" width="100%" alt="RBD images' replication status" title="RBD images' replication status"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.13: </span><span class="title-name">RBD images' replication status </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.11.16.3.2.3.3">#</a></div></div></div></div></li><li class="step"><p>
      On the <span class="emphasis"><em>primary</em></span> cluster, write data to the RBD image.
      On the <span class="emphasis"><em>secondary</em></span> cluster's Ceph Dashboard, navigate to
      <span class="guimenu">Block</span> › <span class="guimenu">Images</span>
      and monitor whether the corresponding image's size is growing as the data
      on the primary cluster is written.
     </p></li></ol></div></div></section></section><section class="sect1" id="dashboard-iscsi" data-id-title="Managing iSCSI Gateways"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.7 </span><span class="title-name">Managing iSCSI Gateways</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-iscsi">#</a></h2></div></div></div><div id="id-1.4.3.7.12.2" data-id-title="More information on iSCSI Gateways" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: More information on iSCSI Gateways</div><p>
    For more general information about iSCSI Gateways, refer to
    <a class="xref" href="cha-ceph-iscsi.html" title="Chapter 22. Ceph iSCSI gateway">Chapter 22, <em>Ceph iSCSI gateway</em></a>.
   </p></div><p>
   To list all available gateways and mapped images, click
   <span class="guimenu">Block</span> › <span class="guimenu">iSCSI</span>
   from the main menu. An <span class="guimenu">Overview</span> tab opens, listing
   currently configured iSCSI Gateways and mapped RBD images.
  </p><p>
   The <span class="guimenu">Gateways</span> table lists each gateway's state, number of
   iSCSI targets, and number of sessions. The <span class="guimenu">Images</span> table
   lists each mapped image's name, related pool name backstore type, and other
   statistical details.
  </p><p>
   The <span class="guimenu">Targets</span> tab lists currently configured iSCSI
   targets.
  </p><div class="figure" id="id-1.4.3.7.12.6"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_igws.png"><img src="images/dash_igws.png" width="100%" alt="List of iSCSI targets" title="List of iSCSI targets"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.14: </span><span class="title-name">List of iSCSI targets </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.12.6">#</a></div></div></div><p>
   To view more detailed information about a target, click the drop-down arrow
   on the target table row. A tree-structured schema opens, listing disks,
   portals, initiators, and groups. Click an item to expand it and view its
   detailed contents, optionally with a related configuration in the table on
   the right.
  </p><div class="figure" id="id-1.4.3.7.12.8"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_igws_status.png"><img src="images/dash_igws_status.png" width="100%" alt="iSCSI target details" title="iSCSI target details"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.15: </span><span class="title-name">iSCSI target details </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.12.8">#</a></div></div></div><section class="sect2" id="dashboard-iscsi-create" data-id-title="Adding iSCSI targets"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.7.1 </span><span class="title-name">Adding iSCSI targets</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-iscsi-create">#</a></h3></div></div></div><p>
    To add a new iSCSI target, click <span class="guimenu">Create</span> in the top
    left of the <span class="guimenu">Targets</span> table and enter the required
    information.
   </p><div class="figure" id="id-1.4.3.7.12.9.3"><div class="figure-contents"><div class="mediaobject"><a href="images/dash_igws_add.png"><img src="images/dash_igws_add.png" width="100%" alt="Adding a new target" title="Adding a new target"/></a></div></div><div class="figure-title-wrap"><div class="figure-title"><span class="title-number">Figure 6.16: </span><span class="title-name">Adding a new target </span><a title="Permalink" class="permalink" href="dashboard-rbds.html#id-1.4.3.7.12.9.3">#</a></div></div></div><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      Enter the target address of the new gateway.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Add portal</span> and select one or multiple iSCSI
      portals from the list.
     </p></li><li class="step"><p>
      Click <span class="guimenu">Add image</span> and select one or multiple RBD images
      for the gateway.
     </p></li><li class="step"><p>
      If you need to use authentication to access the gateway, activate the
      <span class="guimenu">ACL Authentication</span> check box and enter the
      credentials. You can find more advanced authentication options after
      activating <span class="guimenu">Mutual authentication</span> and
      <span class="guimenu">Discovery authentication</span>.
     </p></li><li class="step"><p>
      Confirm with <span class="guimenu">Create Target</span>.
     </p></li></ol></div></div></section><section class="sect2" id="dashboard-iscsi-edit" data-id-title="Editing iSCSI targets"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.7.2 </span><span class="title-name">Editing iSCSI targets</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-iscsi-edit">#</a></h3></div></div></div><p>
    To edit an existing iSCSI target, click its row in the
    <span class="guimenu">Targets</span> table and click <span class="guimenu">Edit</span> in the
    top left of the table.
   </p><p>
    You can then modify the iSCSI target, add or delete portals, and add or
    delete related RBD images. You can also adjust authentication information
    for the gateway.
   </p></section><section class="sect2" id="dashboard-iscsi-delete" data-id-title="Deleting iSCSI targets"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.7.3 </span><span class="title-name">Deleting iSCSI targets</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dashboard-iscsi-delete">#</a></h3></div></div></div><p>
    To delete an iSCSI target, select the table row and click the drop-down
    arrow next to the <span class="guimenu">Edit</span> button and select
    <span class="guimenu">Delete</span>. Activate <span class="guimenu">Yes, I am sure</span> and
    confirm with <span class="guimenu">Delete iSCSI target</span>.
   </p></section></section><section class="sect1" id="dash-rbd-qos" data-id-title="RBD Quality of Service (QoS)"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.8 </span><span class="title-name">RBD Quality of Service (QoS)</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos">#</a></h2></div></div></div><div id="id-1.4.3.7.13.2" data-id-title="For more information" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: For more information</div><p>
    For more general information and a description of RBD QoS configuration
    options, refer to <a class="xref" href="ceph-rbd.html#rbd-qos" title="20.6. QoS settings">Section 20.6, “QoS settings”</a>.
   </p></div><p>
   The QoS options can be configured at different levels.
  </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
     Globally
    </p></li><li class="listitem"><p>
     On a per-pool basis
    </p></li><li class="listitem"><p>
     On a per-image basis
    </p></li></ul></div><p>
   The <span class="emphasis"><em>global</em></span> configuration is at the top of the list and
   will be used for all newly created RBD images and for those images that do
   not override these values on the pool or RBD image layer. An option value
   specified globally can be overridden on a per-pool or per-image basis.
   Options specified on a pool will be applied to all RBD images of that pool
   unless overridden by a configuration option set on an image. Options
   specified on an image will override options specified on a pool and will
   override options specified globally.
  </p><p>
   This way it is possible to define defaults globally, adapt them for all RBD
   images of a specific pool, and override the pool configuration for
   individual RBD images.
  </p><section class="sect2" id="dash-rbd-qos-global" data-id-title="Configuring options globally"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.1 </span><span class="title-name">Configuring options globally</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-global">#</a></h3></div></div></div><p>
    To configure the RADOS Block Device options globally, select
    <span class="guimenu">Cluster</span> › <span class="guimenu">Configuration</span> from the main menu.
   </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
      To list all available global configuration options, next to
      <span class="guimenu">Level</span>, choose
      <span class="guimenu">Advanced</span> from the drop-down
      menu.
     </p></li><li class="step"><p>
      Filter the results of the table by filtering for
      <code class="literal">rbd_qos</code> in the search field. This lists all available
      configuration options for QoS.
     </p></li><li class="step"><p>
      To change a value, click the row in the table, then select
      <span class="guimenu">Edit</span> at the top left of the table. The
      <span class="guimenu">Edit</span> dialog contains six different fields for
      specifying values. The RBD configuration option values are required in
      the <span class="guimenu">mgr</span> text box.
     </p><div id="id-1.4.3.7.13.7.3.3.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
       Unlike the other dialogs, this one does not allow you to specify the
       value in convenient units. You need to set these values in either bytes
       or IOPS, depending on the option you are editing.
      </p></div></li></ol></div></div></section><section class="sect2" id="dash-rbd-qos-pool-create" data-id-title="Configuring options on a new pool"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.2 </span><span class="title-name">Configuring options on a new pool</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-pool-create">#</a></h3></div></div></div><p>
    To create a new pool and configure RBD configuration options on it, click
    <span class="guimenu">Pools</span> › <span class="guimenu">Create</span>. Select
    <span class="guimenu">replicated</span> as pool type. You will then need to add the
    <code class="literal">rbd</code> application tag to the pool to be able to configure
    the RBD QoS options.
   </p><div id="id-1.4.3.7.13.8.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
     It is not possible to configure RBD QoS configuration options on an
     erasure coded pool. To configure the RBD QoS options for erasure coded
     pools, you need to edit the replicated metadata pool of an RBD image. The
     configuration will then be applied to the erasure coded data pool of that
     image.
    </p></div></section><section class="sect2" id="dash-rbd-qos-pool-edit" data-id-title="Configuring options on an existing pool"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.3 </span><span class="title-name">Configuring options on an existing pool</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-pool-edit">#</a></h3></div></div></div><p>
    To configure RBD QoS options on an existing pool, click
    <span class="guimenu">Pools</span>, then click the pool's table row and select
    <span class="guimenu">Edit</span> at the top left of the table.
   </p><p>
    You should see the <span class="guimenu">RBD Configuration</span> section in the
    dialog, followed by a <span class="guimenu">Quality of Service</span> section.
   </p><div id="id-1.4.3.7.13.9.4" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><div class="admon-title">Note</div><p>
     If you see neither the <span class="guimenu">RBD Configuration</span> nor the
     <span class="guimenu">Quality of Service</span> section, you are likely either
     editing an <span class="emphasis"><em>erasure coded</em></span> pool, which cannot be used
     to set RBD configuration options, or the pool is not configured to be used
     by RBD images. In the latter case, assign the <span class="guimenu">rbd</span>
     application tag to the pool and the corresponding configuration sections
     will show up.
    </p></div></section><section class="sect2" id="dash-rbd-qos-qos" data-id-title="Configuration options"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.4 </span><span class="title-name">Configuration options</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-qos">#</a></h3></div></div></div><p>
    Click <span class="guimenu">Quality of Service +</span> to expand the configuration
    options. A list of all available options will show up. The units of the
    configuration options are already shown in the text boxes. In case of any
    bytes per second (BPS) option, you are free to use shortcuts such as '1M'
    or '5G'. They will be automatically converted to '1 MB/s' and
    '5 GB/s' respectively.
   </p><p>
    By clicking the reset button to the right of each text box, any value set
    on the pool will be removed. This does not remove configuration values of
    options configured globally or on an RBD image.
   </p></section><section class="sect2" id="dash-rbd-qos-image-create" data-id-title="Creating RBD QoS options with a new RBD image"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.5 </span><span class="title-name">Creating RBD QoS options with a new RBD image</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-image-create">#</a></h3></div></div></div><p>
    To create an RBD image with RBD QoS options set on that image, select
    <span class="guimenu">Block</span> › <span class="guimenu">Images</span>
    and then click <span class="guimenu">Create</span>. Click
    <span class="guimenu">Advanced...</span> to expand the advanced configuration
    section. Click <span class="guimenu">Quality of Service +</span> to open all
    available configuration options.
   </p></section><section class="sect2" id="dash-rbd-qos-image-edit" data-id-title="Editing RBD QoS options on existing images"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.6 </span><span class="title-name">Editing RBD QoS options on existing images</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-image-edit">#</a></h3></div></div></div><p>
    To edit RBD QoS options on an existing image, select
    <span class="guimenu">Block</span> › <span class="guimenu">Images</span>, then click the pool's table row,
    and lastly click <span class="guimenu">Edit</span>. The edit dialog will show up.
    Click <span class="guimenu">Advanced...</span> to expand the advanced configuration
    section. Click <span class="guimenu">Quality of Service +</span> to open all
    available configuration options.
   </p></section><section class="sect2" id="dash-rbd-qos-image-copy" data-id-title="Changing configuration options when copying or cloning images"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">6.8.7 </span><span class="title-name">Changing configuration options when copying or cloning images</span> <a title="Permalink" class="permalink" href="dashboard-rbds.html#dash-rbd-qos-image-copy">#</a></h3></div></div></div><p>
    If an RBD image is cloned or copied, the values set on that particular
    image will be copied too, by default. If you want to change them while
    copying or cloning, you can do so by specifying the updated configuration
    values in the copy/clone dialog, the same way as when creating or editing
    an RBD image. Doing so will only set (or reset) the values for the RBD
    image that is copied or cloned. This operation changes neither the source
    RBD image configuration, nor the global configuration.
   </p><p>
    If you choose to reset the option value on copying/cloning, no value for
    that option will be set on that image. This means that any value of that
    option specified for the parent pool will be used if the parent pool has
    the value configured. Otherwise, the global default will be used.
   </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="dashboard-pools.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>Manage pools</span></a> </div><div><a class="pagination-link next" href="dash-webui-nfs.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 7 </span>Manage NFS Ganesha</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="dashboard-rbds.html#dashboard-rbds-details"><span class="title-number">6.1 </span><span class="title-name">Viewing details about RBDs</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dashboard-rbds-configuration"><span class="title-number">6.2 </span><span class="title-name">Viewing RBD's configuration</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dashboard-rbds-create"><span class="title-number">6.3 </span><span class="title-name">Creating RBDs</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dashboard-rbd-delete"><span class="title-number">6.4 </span><span class="title-name">Deleting RBDs</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dashboard-rbds-snapshots"><span class="title-number">6.5 </span><span class="title-name">Creating RADOS Block Device snapshots</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dash-rbd-mirror"><span class="title-number">6.6 </span><span class="title-name">RBD mirroring</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dashboard-iscsi"><span class="title-number">6.7 </span><span class="title-name">Managing iSCSI Gateways</span></a></span></li><li><span class="sect1"><a href="dashboard-rbds.html#dash-rbd-qos"><span class="title-number">6.8 </span><span class="title-name">RBD Quality of Service (QoS)</span></a></span></li></ul></div><div class="side-title">Give feedback</div><ul class="feedback" id="_give-feedback"><li><a id="_feedback-editurl" href="https://github.com/SUSE/doc-ses/edit/main/xml/dashboard_rbds.xml" rel="nofollow" target="_blank">Edit source document</a></li></ul><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>