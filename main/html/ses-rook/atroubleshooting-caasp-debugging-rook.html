<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>Troubleshooting | Deploying and Administering SUSE Enterprise Storage with Rook | SUSE Enterprise Storage 7.1</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Troubleshooting | SES 7.1"/>
<meta name="description" content="There are a number of basic actions a user might need to take during debugging. These actions are defined here for reference when they are mentioned …"/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="7.1"/>
<meta name="book-title" content="Deploying and Administering SUSE Enterprise Storage with Rook"/>
<meta name="chapter-title" content="Chapter 15. Troubleshooting"/>
<meta name="tracker-url" content="https://github.com/SUSE/doc-ses/issues/new"/>
<meta name="tracker-type" content="gh"/>
<meta name="tracker-gh-assignee" content="tbazant"/>
<meta name="tracker-gh-template" content="&#10;     ### Type of report&#10;   - [ ] bug&#10;   - [ ] feature request&#10;&#10;### Source Document&#10;@@source@@&#10;&#10;### Summary&#10;&lt;!-- A clear and concise description of what the bug/feature request is. --&gt;&#10;&#10;### Steps To Reproduce&#10;&lt;!-- Steps to reproduce the behavior if you ran through steps in the document. --&gt;&#10;&#10;### Expected Results&#10;&lt;!-- A clear and concise description of what you expected to happen. --&gt;&#10;&#10;### Actual Results&#10;&lt;!-- Explain what actually happened if steps were executed, and if applicable, add screenshots to help explain your problem. --&gt;&#10;&#10;### Notes&#10;&lt;!-- Add any other context about the problem here. --&gt;&#10;&#10;    "/>
<meta name="tracker-gh-labels" content="bug,question,feature request"/>
<meta property="og:title" content="Troubleshooting | SES 7.1"/>
<meta property="og:description" content="There are a number of basic actions a user might need to take during debugging. These actions are defined here for reference when they are mentioned …"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Troubleshooting | SES 7.1"/>
<meta name="twitter:description" content="There are a number of basic actions a user might need to take during debugging. These actions are defined here for reference when they are mentioned …"/>
<link rel="prev" href="rook-ses-troubleshooting.html" title="Part III. Troubleshooting Ceph on SUSE CaaS Platform"/><link rel="next" href="admin-caasp-ceph-common-issues.html" title="Chapter 16. Common issues"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deploying and Administering SUSE Enterprise Storage with Rook</a><span> / </span><a class="crumb" href="rook-ses-troubleshooting.html">Troubleshooting Ceph on SUSE CaaS Platform</a><span> / </span><a class="crumb" href="atroubleshooting-caasp-debugging-rook.html">Troubleshooting</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Deploying and Administering SUSE Enterprise Storage with Rook</div><ol><li><a href="preface-rook.html" class=" "><span class="title-number"> </span><span class="title-name">About this guide</span></a></li><li><a href="rook-ses-deployment.html" class="has-children "><span class="title-number">I </span><span class="title-name">Quick Start: Deploying and Upgrading Ceph on SUSE CaaS Platform</span></a><ol><li><a href="deploy-rook.html" class=" "><span class="title-number">1 </span><span class="title-name">Quick start</span></a></li><li><a href="update-rook.html" class=" "><span class="title-number">2 </span><span class="title-name">Updating Rook</span></a></li></ol></li><li><a href="rook-ses-admin.html" class="has-children "><span class="title-number">II </span><span class="title-name">Administrating Ceph on SUSE CaaS Platform</span></a><ol><li><a href="admin-intro-caasp.html" class=" "><span class="title-number">3 </span><span class="title-name">Rook-Ceph administration</span></a></li><li><a href="admin-caasp-cluster.html" class=" "><span class="title-number">4 </span><span class="title-name">Ceph cluster administration</span></a></li><li><a href="admin-caasp-block-storage.html" class=" "><span class="title-number">5 </span><span class="title-name">Block Storage</span></a></li><li><a href="admin-caasp-cephfs.html" class=" "><span class="title-number">6 </span><span class="title-name">CephFS</span></a></li><li><a href="admin-caasp-crd.html" class=" "><span class="title-number">7 </span><span class="title-name">Ceph cluster custom resource definitions</span></a></li><li><a href="admin-caasp-cephconfig.html" class=" "><span class="title-number">8 </span><span class="title-name">Configuration</span></a></li><li><a href="admin-caasp-cephtoolbox.html" class=" "><span class="title-number">9 </span><span class="title-name">Toolboxes</span></a></li><li><a href="admin-caasp-cephosd.html" class=" "><span class="title-number">10 </span><span class="title-name">Ceph OSD management</span></a></li><li><a href="admin-caasp-ceph-examples.html" class=" "><span class="title-number">11 </span><span class="title-name">Ceph examples</span></a></li><li><a href="admin-caasp-advanced-config.html" class=" "><span class="title-number">12 </span><span class="title-name">Advanced configuration</span></a></li><li><a href="admin-caasp-object-storage.html" class=" "><span class="title-number">13 </span><span class="title-name">Object Storage</span></a></li><li><a href="admin-caasp-dashboard.html" class=" "><span class="title-number">14 </span><span class="title-name">Ceph Dashboard</span></a></li></ol></li><li class="active"><a href="rook-ses-troubleshooting.html" class="has-children you-are-here"><span class="title-number">III </span><span class="title-name">Troubleshooting Ceph on SUSE CaaS Platform</span></a><ol><li><a href="atroubleshooting-caasp-debugging-rook.html" class=" you-are-here"><span class="title-number">15 </span><span class="title-name">Troubleshooting</span></a></li><li><a href="admin-caasp-ceph-common-issues.html" class=" "><span class="title-number">16 </span><span class="title-name">Common issues</span></a></li></ol></li><li><a href="bk05apa.html" class=" "><span class="title-number">A </span><span class="title-name">Ceph maintenance updates based on upstream 'Pacific' point releases</span></a></li><li><a href="bk05go01.html" class=" "><span class="title-number"> </span><span class="title-name">Glossary</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="atroubleshooting-caasp-debugging-rook" data-id-title="Troubleshooting"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">7.1</span></div><div><h1 class="title"><span class="title-number">15 </span><span class="title-name">Troubleshooting</span> <a title="Permalink" class="permalink" href="atroubleshooting-caasp-debugging-rook.html#">#</a></h1></div></div></div><section class="sect1" id="debugging-caasp-rook-methods" data-id-title="Debugging Rook"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">15.1 </span><span class="title-name">Debugging Rook</span> <a title="Permalink" class="permalink" href="atroubleshooting-caasp-debugging-rook.html#debugging-caasp-rook-methods">#</a></h2></div></div></div><p>
   There are a number of basic actions a user might need to take during
   debugging. These actions are defined here for reference when they are
   mentioned in more documentation below.
  </p><div id="id-1.7.5.2.3.3" class="admonition important normal"><img class="symbol" alt="Important" title="Important" src="static/images/icon-important.svg"/><h6>Important</h6><p>
    This document is not devoted to an in-depth explanation of what Kubernetes is,
    what its features are, how it is used, how to navigate it, or how to debug
    applications that run on it. This document will use Kubernetes terms, and users
    are expected to know how to look up Kubernetes information they do not already
    have. This document will give an outline of how to use Kubernetes tools to get
    any information needed in the Rook-Ceph context and, when relevant, will
    briefly explain how Rook uses Kubernetes features.
   </p></div><section class="sect2" id="set-ops-log-debug" data-id-title="Setting the operator log level to debug"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">15.1.1 </span><span class="title-name">Setting the operator log level to debug</span> <a title="Permalink" class="permalink" href="atroubleshooting-caasp-debugging-rook.html#set-ops-log-debug">#</a></h3></div></div></div><p>
    In general, the first place to look when encountering a failure is to get
    logs for the <code class="systemitem">rook-ceph-operator</code>
    pod. To get the most informative logs possible, set the operator log level
    to <code class="literal">DEBUG</code>.
   </p><p>
    To do this, modify Helm's <code class="filename">values.yaml</code> or modify the
    <code class="filename">operator.yaml</code> manifest. Regardless of the method
    chosen, the log level can always be set by editing the deployment directly
    with <code class="command">kubectl</code>. For example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">kubectl@adm &gt; </code>kubectl --namespace rook-ceph set env deployment/rook-ceph-operator ROOK_LOG_LEVEL=DEBUG</pre></div><p>
    After editing the deployment, the operator pod will restart automatically
    and will start outputting logs with the new log level.
   </p><div id="id-1.7.5.2.3.4.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note</h6><p>
     If you are experiencing a particular failure, it may take some time for
     the Rook operator to reach the failure location again to report debug
     logs.
    </p></div></section><section class="sect2" id="use-toolbox-pod" data-id-title="Using the toolbox pod"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">15.1.2 </span><span class="title-name">Using the toolbox pod</span> <a title="Permalink" class="permalink" href="atroubleshooting-caasp-debugging-rook.html#use-toolbox-pod">#</a></h3></div></div></div><p>
    Use the Rook toolbox pod to interface directly with the Ceph cluster
    via the CLI. For example:
   </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">kubectl@adm &gt; </code>kubectl --namespace rook-ceph exec -it deploy/rook-ceph-tools -- bash</pre></div><p>
    If the <code class="systemitem">rook-ceph-tools</code>
    deployment does not exist, it should be created using the
    <code class="filename">toolbox.yaml</code> manifest.
   </p><div id="id-1.7.5.2.3.5.5" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note</h6><p>
     To set log levels for Ceph daemons, it is advised to use the Ceph CLI
     from the <code class="systemitem">toolbox</code> pod.
    </p></div></section><section class="sect2" id="ses-supportutils-plugin-rook" data-id-title="Using the SES supportutils plugin"><div class="titlepage"><div><div><h3 class="title"><span class="title-number">15.1.3 </span><span class="title-name">Using the SES supportutils plugin</span> <a title="Permalink" class="permalink" href="atroubleshooting-caasp-debugging-rook.html#ses-supportutils-plugin-rook">#</a></h3></div></div></div><p>
    The <code class="literal">supportutils</code> plugin for SUSE Enterprise Storage works with
    Rook clusters. It is installed by the
    <code class="filename">supportutils-plugin-ses</code> package. The plugin collects
    container logs and more information about a Rook-Ceph cluster, making
    collection of logs easy. Once the logs are collected, you can browse the
    collected information and logs without needing to progressively collect
    more detailed information at each step.
   </p><p>
    The <code class="literal">supportutils</code>plugin does not alter the Rook log
    level to <code class="literal">DEBUG</code>, and it is advised to set this to
    <code class="literal">DEBUG</code> before running the plugin. The plugin also does
    not change any Ceph log levels; also consider changing those if the
    failure merits it before running the plugin.
   </p></section></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="rook-ses-troubleshooting.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Part III </span>Troubleshooting Ceph on SUSE CaaS Platform</span></a> </div><div><a class="pagination-link next" href="admin-caasp-ceph-common-issues.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 16 </span>Common issues</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="atroubleshooting-caasp-debugging-rook.html#debugging-caasp-rook-methods"><span class="title-number">15.1 </span><span class="title-name">Debugging Rook</span></a></span></li></ul></div><div class="side-title">Give feedback</div><ul class="feedback" id="_give-feedback"><li><a id="_feedback-editurl" href="https://github.com/SUSE/doc-ses/edit/main/xml/troubleshooting_caasp_debugging_rook.xml" rel="nofollow" target="_blank">Edit source document</a></li></ul><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>