<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><title>Backing Up the Cluster Configuration | Deployment Guide | SUSE Enterprise Storage 5.5 (SES 5 &amp; SES 5.5)</title><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<meta name="title" content="Backing Up the Cluster Configuration | SES 5.5 (SES 5 …"/>
<meta name="description" content="This chapter explains which files on the admin node should be backed up. As soon as you are finished with your cluster deployment or migration, create a backup…"/>
<meta name="product-name" content="SUSE Enterprise Storage"/>
<meta name="product-number" content="5.5 (SES 5 &amp; SES 5.5)"/>
<meta name="book-title" content="Deployment Guide"/>
<meta name="chapter-title" content="Chapter 6. Backing Up the Cluster Configuration"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="tbazant@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Enterprise Storage 5"/>
<meta property="og:title" content="Backing Up the Cluster Configuration | SES 5.5 (SES 5 …"/>
<meta property="og:description" content="This chapter explains which files on the admin node should be backed up. As soon as you are finished with your cluster deployment or migration, create a backup…"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Backing Up the Cluster Configuration | SES 5.5 (SES 5 …"/>
<meta name="twitter:description" content="This chapter explains which files on the admin node should be backed up. As soon as you are finished with your cluster deployment or migration, create a backup…"/>
<link rel="prev" href="cha-ceph-upgrade.html" title="Chapter 5. Upgrading from Previous Releases"/><link rel="next" href="ceph-deploy-ds-custom.html" title="Chapter 7. Customizing the Default Configuration"/>
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"> </script><script src="static/js/script.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Deployment Guide</a><span> / </span><a class="crumb" href="ses-deployment.html">Cluster Deployment and Upgrade</a><span> / </span><a class="crumb" href="cha-deployment-backup.html">Backing Up the Cluster Configuration</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Deployment Guide</div><ol><li><a href="bk02pr01.html" class=" "><span class="title-number"> </span><span class="title-name">About This Guide</span></a></li><li><a href="part-ses.html" class="has-children "><span class="title-number">I </span><span class="title-name">SUSE Enterprise Storage</span></a><ol><li><a href="cha-storage-about.html" class=" "><span class="title-number">1 </span><span class="title-name">SUSE Enterprise Storage 5.5 and Ceph</span></a></li><li><a href="storage-bp-hwreq.html" class=" "><span class="title-number">2 </span><span class="title-name">Hardware Requirements and Recommendations</span></a></li><li><a href="cha-admin-ha.html" class=" "><span class="title-number">3 </span><span class="title-name">Ceph Admin Node HA Setup</span></a></li></ol></li><li class="active"><a href="ses-deployment.html" class="has-children you-are-here"><span class="title-number">II </span><span class="title-name">Cluster Deployment and Upgrade</span></a><ol><li><a href="ceph-install-saltstack.html" class=" "><span class="title-number">4 </span><span class="title-name">Deploying with DeepSea/Salt</span></a></li><li><a href="cha-ceph-upgrade.html" class=" "><span class="title-number">5 </span><span class="title-name">Upgrading from Previous Releases</span></a></li><li><a href="cha-deployment-backup.html" class=" you-are-here"><span class="title-number">6 </span><span class="title-name">Backing Up the Cluster Configuration</span></a></li><li><a href="ceph-deploy-ds-custom.html" class=" "><span class="title-number">7 </span><span class="title-name">Customizing the Default Configuration</span></a></li></ol></li><li><a href="additional-software.html" class="has-children "><span class="title-number">III </span><span class="title-name">Installation of Additional Services</span></a><ol><li><a href="cha-ceph-as-intro.html" class=" "><span class="title-number">8 </span><span class="title-name">Installation of Services to Access your Data</span></a></li><li><a href="cha-ceph-additional-software-installation.html" class=" "><span class="title-number">9 </span><span class="title-name">Ceph Object Gateway</span></a></li><li><a href="cha-ceph-as-iscsi.html" class=" "><span class="title-number">10 </span><span class="title-name">Installation of iSCSI Gateway</span></a></li><li><a href="cha-ceph-as-cephfs.html" class=" "><span class="title-number">11 </span><span class="title-name">Installation of CephFS</span></a></li><li><a href="cha-as-ganesha.html" class=" "><span class="title-number">12 </span><span class="title-name">Installation of NFS Ganesha</span></a></li><li><a href="cha-ses-cifs.html" class=" "><span class="title-number">13 </span><span class="title-name">Exporting Ceph Data via Samba</span></a></li></ol></li><li><a href="ap-deploy-docupdate.html" class=" "><span class="title-number">A </span><span class="title-name">Documentation Updates</span></a></li> </ol> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section class="chapter" id="cha-deployment-backup" data-id-title="Backing Up the Cluster Configuration"><div class="titlepage"><div><div class="version-info">Applies to  <span class="productname">SUSE Enterprise Storage</span> <span class="productnumber">5.5 (SES 5 &amp; SES 5.5)</span></div><div><h2 class="title"><span class="title-number">6 </span><span class="title-name">Backing Up the Cluster Configuration</span> <a title="Permalink" class="permalink" href="cha-deployment-backup.html#">#</a></h2></div></div></div><p>
  This chapter explains which files on the admin node should be backed up. As
  soon as you are finished with your cluster deployment or migration, create a
  backup of these directories.
 </p><section class="sect1" id="backup-ceph" data-id-title="Back Up Ceph COnfiguration"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.1 </span><span class="title-name">Back Up Ceph COnfiguration</span> <a title="Permalink" class="permalink" href="cha-deployment-backup.html#backup-ceph">#</a></h2></div></div></div><p>
   Back up the <code class="filename">/etc/ceph</code> directory. It contains crucial
   cluster configuration. You will need the backup of
   <code class="filename">/etc/ceph</code> for example when you need to replace the
   Admin Node.
  </p></section><section class="sect1" id="sec-deployment-backup-salt" data-id-title="Back Up Salt Configuration"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.2 </span><span class="title-name">Back Up Salt Configuration</span> <a title="Permalink" class="permalink" href="cha-deployment-backup.html#sec-deployment-backup-salt">#</a></h2></div></div></div><p>
   You need to back up the <code class="filename">/etc/salt/</code> directory. It
   contains the Salt configuration files, for example the Salt master key and
   accepted client keys.
  </p><p>
   The Salt files are not strictly required for backing up the admin node,
   but make redeploying the Salt cluster easier. If there is no backup of
   these files, the Salt minions need to be registered again at the new admin
   node.
  </p><div id="id-1.4.4.4.5.4" data-id-title="Security of the Salt Master Private Key" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.svg"/><h6>Note: Security of the Salt Master Private Key</h6><p>
    Make sure that the backup of the Salt master private key is stored in a safe
    location. The Salt master key can be used to manipulate all cluster nodes.
   </p></div><p>
   After restoring the <code class="filename">/etc/salt</code> directory from a backup,
   restart the Salt services:
  </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">root@master # </code><code class="command">systemctl</code> restart salt-master
<code class="prompt user">root@master # </code><code class="command">systemctl</code> restart salt-minion</pre></div></section><section class="sect1" id="sec-deployment-backup-deepsea" data-id-title="Back Up DeepSea Configuration"><div class="titlepage"><div><div><h2 class="title"><span class="title-number">6.3 </span><span class="title-name">Back Up DeepSea Configuration</span> <a title="Permalink" class="permalink" href="cha-deployment-backup.html#sec-deployment-backup-deepsea">#</a></h2></div></div></div><p>
   All files required by DeepSea are stored in
   <code class="filename">/srv/pillar/</code>, <code class="filename">/srv/salt/</code> and
   <code class="filename">/etc/salt/master.d</code>.
  </p><p>
   If you need to redeploy the admin node, install the DeepSea package on the
   new node and move the backed up data back into the directories. DeepSea
   can then be used again without any further changes being required. Before
   using DeepSea again, make sure that all Salt minions are correctly
   registered on the admin node.
  </p></section></section><nav class="bottom-pagination"><div><a class="pagination-link prev" href="cha-ceph-upgrade.html"><span class="pagination-relation">Previous</span><span class="pagination-label"><span class="title-number">Chapter 5 </span>Upgrading from Previous Releases</span></a> </div><div><a class="pagination-link next" href="ceph-deploy-ds-custom.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Chapter 7 </span>Customizing the Default Configuration</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="sect1"><a href="cha-deployment-backup.html#backup-ceph"><span class="title-number">6.1 </span><span class="title-name">Back Up Ceph COnfiguration</span></a></span></li><li><span class="sect1"><a href="cha-deployment-backup.html#sec-deployment-backup-salt"><span class="title-number">6.2 </span><span class="title-name">Back Up Salt Configuration</span></a></span></li><li><span class="sect1"><a href="cha-deployment-backup.html#sec-deployment-backup-deepsea"><span class="title-number">6.3 </span><span class="title-name">Back Up DeepSea Configuration</span></a></span></li></ul></div><div class="side-title">Give feedback</div><ul class="feedback" id="_give-feedback"><li><a id="_feedback-reportbug" href="#" rel="nofollow" target="_blank">Report an issue</a></li><li><a id="_feedback-editurl" href="https://github.com/SUSE/doc-ses/edit/maintenance/ses5/xml/admin_ds_backup.xml" rel="nofollow" target="_blank">Edit source document</a></li></ul><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2022</span></div></div></footer></body></html>